!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}var e,f=a("./states/Boot.js"),g=d(f),h=a("./states/Menu.js"),i=d(h),j=a("./states/GameNarrative.js"),k=d(j),l=a("./states/Preload.js"),m=d(l),n=a("./states/Game.js"),o=d(n),p=a("./states/Ep1.js"),q=d(p),r=a("./states/Ep2.js"),s=d(r),t=a("./states/Ep3.js"),u=d(t),v=a("./states/Ep4.js"),w=d(v),x=a("./states/Ep5.js"),y=d(x),z=a("./states/Ep6.js"),A=d(z),B=a("./states/GameOver.js"),C=d(B),D=a("./states/Won.js"),E=d(D);window.onload=function(){e=new Phaser.Game(1024,768,Phaser.CANVAS,"game"),e.state.add("boot",g.default),e.state.add("menu",i.default),e.state.add("gamenarrative",k.default),e.state.add("preload",m.default),e.state.add("game",o.default),e.state.add("ep1",q.default),e.state.add("ep2",s.default),e.state.add("ep3",u.default),e.state.add("ep4",w.default),e.state.add("ep5",y.default),e.state.add("ep6",A.default),e.state.add("gameover",C.default),e.state.add("won",E.default),e.state.start("boot")}},{"./states/Boot.js":23,"./states/Ep1.js":24,"./states/Ep2.js":25,"./states/Ep3.js":26,"./states/Ep4.js":27,"./states/Ep5.js":28,"./states/Ep6.js":29,"./states/Game.js":30,"./states/GameNarrative.js":31,"./states/GameOver.js":32,"./states/Menu.js":33,"./states/Preload.js":34,"./states/Won.js":35}],2:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,null,[{key:"muteOrPlay",value:function(a,b){if(a)for(var c in a.sounds)a.sounds[c].mute=b}},{key:"playSound",value:function(a,b){if(!(void 0==a||void 0==b||b.length<0)){var c=!0;b.forEach(function(b){if(a.sounds[b].isPlaying)return void(c=!1)}),c&&a.play(a.game.rnd.pick(b))}}},{key:"storeEp",value:function(a){if("undefined"!=typeof Storage){var b=localStorage.getItem("played_ep");if(b){var c=JSON.parse(b);c.push(a),localStorage.setItem("played_ep",JSON.stringify(Array.from(new Set(c))))}else localStorage.setItem("played_ep",JSON.stringify([a]));localStorage.setItem("current_ep",a)}}},{key:"getEp",value:function(){if("undefined"!=typeof Storage)return localStorage.getItem("current_ep")}},{key:"storeTotalScore",value:function(a,b){if("undefined"!=typeof Storage){var c=localStorage.getItem("total_score");if(c){var d=JSON.parse(c);d[a-1]=b,localStorage.setItem("total_score",JSON.stringify(d))}else{var e=new Array;e[a-1]=b,localStorage.setItem("total_score",JSON.stringify(e))}}}},{key:"getTotalScore",value:function(){if("undefined"!=typeof Storage){var a=localStorage.getItem("total_score"),b=localStorage.getItem("high_score");if(a){var c=JSON.parse(a),d=0;return c.forEach(function(a){d+=a}),b?b<d&&localStorage.setItem("high_score",d):localStorage.setItem("high_score",d),d}}}},{key:"storeData",value:function(a,b){"undefined"!=typeof Storage&&localStorage.setItem(a,JSON.stringify(b))}},{key:"getData",value:function(a){if("undefined"!=typeof Storage)return JSON.parse(localStorage.getItem(a))}},{key:"convertTileCoorToP2",value:function(a,b,c,d,e){var f=new Phaser.Point(a+c/2,b-d/2);return e.x=f.x,e.y=f.y,f}},{key:"findObjectInLayer",value:function(a,b){var c=new Array;return a.objects[b].forEach(function(a){c.push(a)}),c}},{key:"findUniqueGIDInLayer",value:function(a,b){var c=new Array,d=new Array;return a.objects[b].forEach(function(a){d.length>0&&-1!=d.indexOf(a.gid)||(c.push(a),d.push(a.gid))}),c}},{key:"checkIfOnFloor",value:function(a,b){for(var c=p2.vec2.fromValues(0,1),d=!1,e=0;e<a.physics.p2.world.narrowphase.contactEquations.length;e++){var f=a.physics.p2.world.narrowphase.contactEquations[e];if(f.bodyA===b.body.data||f.bodyB===b.body.data){var g=p2.vec2.dot(f.normalA,c);f.bodyA===b.body.data&&(g*=-1),g>.5&&(d=!0)}}return d}}]),a}();c.default=f,b.exports=c.default},{}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a("../components/Tools.js"),i=d(h),j=function(a){function b(a,c,d,f,h){switch(e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c,d,f,h),this.game.physics.p2.enable(this,!1),this.body.static=!0,h){case"wateroutlet":this.body.clearShapes(),this.body.setCircle(this.width/2,0,-this.width/4),i.default.convertTileCoorToP2(c,d,this.width,this.height,this.body);break;default:this.body.clearShapes(),this.body.setRectangle(this.width,Math.round(.9*this.height),0),i.default.convertTileCoorToP2(c,d,this.width,this.height,this.body)}}return f(b,a),b}(Phaser.Sprite);c.default=j,b.exports=c.default},{"../components/Tools.js":2}],4:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("../components/Tools.js"),j=d(i),k=function(a){function b(a,c,d,f,g){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c,d,f,g),this.animations.add("fly",Phaser.Animation.generateFrameNames("frame",0,3,"",0),6,!1,!1),this.speed=200,a.physics.p2.enable(this,!1),this.body.data.gravityScale=-.1,this.body.clearShapes(),this.body.setRectangle(.5*this.width,Math.round(.9*this.height),0,0),j.default.convertTileCoorToP2(c,d,this.width,this.height,this.body),this.anchor.setTo(.7,.55),this.body.fixedRotation=!0,this.body.damping=.2,this.lastPositionX=this.x,this.heartBeatInterval=1200,this.heartBeatChecker=this.game.time.create(!1),this.heartBeatChecker.loop(this.heartBeatInterval,this.heartBeatCheck,this),this.heartBeatChecker.start(),this.reverseNow=!1,this.animations.play("fly",null,!0),this.damageTimer=0,this.setHealth(56),this.balls=a.add.group(a.world,"balls",!1,!0,1),this.balls.createMultiple(2,"objects3",["ball_green","ball_red","ball_yellow","ball_blue"]),this.balls.forEach(function(a){a.body.clearShapes(),a.body.setCircle(a.width/2)},a.world),this.ballticker=0,this.flashRedEffect=this.game.add.tween(this).to({tint:16711680},50,Phaser.Easing.Bounce.out).to({tint:16484745},50,Phaser.Easing.Bounce.out).to({tint:16777215},150,Phaser.Easing.Circular.out)}return f(b,a),g(b,[{key:"heartBeatCheck",value:function(){if(Math.abs(this.x-this.lastPositionX)>20?this.lastPositionX=this.x:this.reverseNow=!0,this.ballticker>2){var a=this.balls.getRandom();a&&!a.alive&&(a.lifespan=5200,a.reset(this.x,this.y-50),this.scale.x<0?a.body.applyForce([800,1e3],this.body.x+5,this.body.y+5):a.body.applyForce([-800,1e3],this.body.x-5,this.body.y+5)),this.ballticker=0}this.ballticker++}},{key:"damageCat",value:function(a,b){this.health<=.5||this.game.time.now>this.damageTimer&&(this.damage(a),this.flashRedEffect.isRunning||this.flashRedEffect.start(),this.damageTimer=this.game.time.now+b)}},{key:"update",value:function(){this.body.velocity.x=this.speed,this.reverseNow&&(this.speed*=-1,this.scale.x=this.speed>0?1:-1,this.reverseNow=!1),this.scale.x=this.speed>0?1:-1}}]),b}(Phaser.Sprite);c.default=k,b.exports=c.default},{"../components/Tools.js":2}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("../components/Tools.js"),j=(d(i),function(a){function b(a,c,d,f,g){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c,d,f,g),this.animations.add("fly",Phaser.Animation.generateFrameNames("catf",1,4,"",0),6,!1,!1),this.speed=150,this.paused=!0;var i=a.add.graphics(this.x,this.y);i.clear(),i.beginFill(5391673),i.drawRect(0,-200,2,400),i.endFill(),i.name="rope",this.marina=a.add.sprite(this.x,this.y,"objects5","marina_captured"),this.marina.name="marina",a.physics.p2.enable([this,i,this.marina],!1),this.body.data.gravityScale=-.6,this.body.fixedRotation=!0,this.body.damping=.2,i.body.data.gravityScale=.4,this.marina.body.data.gravityScale=.6,this.marina.anchor.setTo(1,.5),a.physics.p2.createRevoluteConstraint(this,[80,-62],i,[1,-200],1e3),a.physics.p2.createRevoluteConstraint(i,[1,200],this.marina,[0,0],1e3),this.marinatext=a.add.text(this.x,this.y," ",{font:"15px Century",fill:"#ffffff"}),this.marinatext.anchor.setTo(.5,.5),this.marinatext.kill(),this.animations.play("fly",null,!0),this.fadesout=new Array,this.fadesout[0]=this.game.add.tween(this).to({alpha:0},4e3,Phaser.Easing.Quadratic.Out),this.fadesout[1]=this.game.add.tween(i).to({alpha:0},4e3,Phaser.Easing.Quadratic.Out),this.fadesout[2]=this.game.add.tween(this.marina).to({alpha:0},4e3,Phaser.Easing.Quadratic.Out)}return f(b,a),g(b,[{key:"say",value:function(a){this.marinatext.setText(a),this.marinatext.reset(this.marina.x-this.marina.width/2,this.marina.y-140),this.marinatext.lifespan=3e3}},{key:"fadeout",value:function(){this.fadesout[0].start(),this.fadesout[1].start(),this.fadesout[2].start()}},{key:"update",value:function(){this.body.velocity.y=-this.speed,this.paused||(this.body.velocity.x=this.speed)}}]),b}(Phaser.Sprite));c.default=j,b.exports=c.default},{"../components/Tools.js":2}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("../components/Tools.js"),j=d(i),k=function(a){function b(a,c,d,f){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),this.style={font:"bold 24px Century",fill:"#cde16d"},this.totalcheese=f,this.score=0,this.holder=this.create(c,d,"objects1","cheese1"),this.scoretext=this.add(new Phaser.Text(a,c+70,d+12,"x "+this.score+" / "+this.totalcheese,this.style)),this.fixedToCamera=!0}return f(b,a),g(b,[{key:"increaseScore",value:function(a){this.score+=a,this.scoretext.setText("x "+this.score+" / "+this.totalcheese)}},{key:"addToTotalScore",value:function(a){j.default.storeTotalScore(a,this.score)}}]),b}(Phaser.Group);c.default=k,b.exports=c.default},{"../components/Tools.js":2}],7:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a("../components/Tools.js"),i=d(h),j=function(a){function b(a,c,d,f,h){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c,d,f,h),this.game.physics.p2.enable(this,!1),i.default.convertTileCoorToP2(c,d,this.width,this.height,this.body),"sword1"==h||"shurikens"==h?this.game.add.tween(this.scale).to({x:-1},1500,Phaser.Easing.Circular.InOut,!0,0,1/0,!0):this.game.add.tween(this).to({alpha:.6},800,Phaser.Easing.Quadratic.InOut,!0,0,1/0,!0)}return f(b,a),b}(Phaser.Sprite);c.default=j,b.exports=c.default},{"../components/Tools.js":2}],8:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a("../components/Tools.js"),i=d(h),j=function(a){function b(a,c,d,f,h){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c,d,f,h),this.game.physics.p2.enable(this,!1),this.body.static=!0,this.alpha=0,i.default.convertTileCoorToP2(c,d,this.width,this.height,this.body)}return f(b,a),b}(Phaser.Sprite);c.default=j,b.exports=c.default},{"../components/Tools.js":2}],9:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=function(a){function b(a,c,e){d(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),this.warningholder=this.create(c-10,e,"objects1","warning"),this.warningholder.alpha=0,this.bar=this.create(c+21,e+13,"objects1","energy"),this.holder=this.create(c,e,"objects1","energy_holder"),this.fixedToCamera=!0,this.warninganime=a.add.tween(this.warningholder).to({alpha:1},600,Phaser.Easing.Quadratic.InOut,!1,0,0,!0)}return e(b,a),f(b,[{key:"setValue",value:function(a){a<=0||(this.tween&&this.tween.stop(),this.tween=this.game.add.tween(this.bar.scale),this.tween.to({x:a},350),this.tween.start())}},{key:"startWarning",value:function(){this.warninganime.isPlaying||this.warninganime.start()}}]),b}(Phaser.Group);c.default=h,b.exports=c.default},{}],10:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a("../components/Tools.js"),i=d(h),j=function(a){function b(a,c,d,f,h){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c,d,f,h),this.game.physics.p2.enable(this,!1),this.body.static=!0,i.default.convertTileCoorToP2(c,d,this.width,this.height,this.body)}return f(b,a),b}(Phaser.Sprite);c.default=j,b.exports=c.default},{"../components/Tools.js":2}],11:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=function(a){function b(a,c,e){d(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),this.warningholder=this.create(c,e,"objects1","warning"),this.warningholder.alpha=0,this.bar=this.create(c+32,e+13,"objects1","health"),this.holder=this.create(c,e,"objects1","heart_holder"),this.fixedToCamera=!0,this.warninganime=a.add.tween(this.warningholder).to({alpha:1},600,Phaser.Easing.Quadratic.InOut,!1,0,0,!0)}return e(b,a),f(b,[{key:"setValue",value:function(a){a<=0||(this.tween&&this.tween.stop(),this.tween=this.game.add.tween(this.bar.scale),this.tween.to({x:a},350),this.tween.start())}},{key:"startWarning",value:function(){this.warninganime.isPlaying||this.warninganime.start()}}]),b}(Phaser.Group);c.default=h,b.exports=c.default},{}],12:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("../components/Tools.js"),j=d(i),k=function(a){function b(a,c,d,f,g){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c,d,f,g),this.game.physics.p2.enable(this,!1),this.body.static=!0,j.default.convertTileCoorToP2(c,d,this.width,this.height,this.body)}return f(b,a),g(b,[{key:"update",value:function(){}}]),b}(Phaser.Sprite);c.default=k,b.exports=c.default},{"../components/Tools.js":2}],13:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("../components/Tools.js"),j=d(i),k=function(a){function b(a,c,d){var f=this;e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c,d,"player","runframe0"),this.speed=450,this.airSpeed=300,this.jumpPower=680,this.jumpTimer=0,this.hitGroundTimer=0,this.jumpInterval=750,this.damageTimer=0,this.damageInterval=1200,this.heartBeatInterval=800,this.jump=!1,this.isMoving=!1,this.isJumping=!1,this.game.physics.p2.enable(this,!1),this.body.clearShapes(),this.body.addCapsule(30,35,0,0),this.anchor.setTo(.5,.6),this.body.fixedRotation=!0,this.body.damping=.2,this.attackEnabled=j.default.getData("attackEnabled"),this.throwEnabled=j.default.getData("throwEnabled"),this.attackEnabled?this.changeBody():(this.animations.add("run",Phaser.Animation.generateFrameNames("runframe",1,8,"",0),18,!1,!1),this.stillFrame="runframe0",this.jumpUpFrame="jumpframe1",this.jumpDownFrame="jumpframe2"),this.hitbox1=this.addChild(a.make.sprite(this.x,this.y,"objects1","stop")),this.game.physics.p2.enable(this.hitbox1,!1),this.hitbox1.body.kinematic=!0,this.hitbox1.alpha=0,this.hitbox1.kill(),this.throwEnabled&&this.throwBody(),this.shurikens=this.game.add.group(this.game.world,"shurikens",!1,!0,1),this.shurikens.createMultiple(20,"player","s1"),this.shurikens.forEach(function(a){a.body.clearShapes(),a.body.setCircle(a.width/2),a.animations.add("fly",Phaser.Animation.generateFrameNames("s",1,3,"",0),25,!0,!1),a.body.kinematic=!0,a.body.damping=.2},this.game.world),this.playertext=this.game.add.text(this.x,this.y," ",{font:"15px Century",fill:"#ffffff"}),this.playertext.anchor.setTo(.5,.5),this.playertext.kill(),this.texttimer=0,this.flashRedEffect=this.game.add.tween(this).to({tint:16711680},50,Phaser.Easing.Bounce.out).to({tint:16484745},50,Phaser.Easing.Bounce.out).to({tint:16777215},150,Phaser.Easing.Circular.out),this.flashGreenEffect=this.game.add.tween(this).to({tint:65280},50,Phaser.Easing.Bounce.out).to({tint:8650627},50,Phaser.Easing.Bounce.out).to({tint:16777215},150,Phaser.Easing.Circular.out),this.setHealth(this.maxHealth),this.maxEnergy=100,this.energy=this.maxEnergy,this.heartBeat=this.game.time.create(!1),this.heartBeat.loop(this.heartBeatInterval,this.heartBeatCheck,this),this.heartBeat.start(),this.events.onKilled.add(function(){f.game.state.start("preload",!0,!1,"gameover")},this),this.resting=!1,this.onslippyplatform=!1,this.paused=!1,this.cursors=this.game.input.keyboard.createCursorKeys(),this.spaceBar=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.keys=this.game.input.keyboard.addKeys({A:Phaser.Keyboard.A,S:Phaser.Keyboard.S}),this.keys.A.onDown.add(function(){f.paused||f.attackEnabled&&(f.attacking=!0)},this),this.keys.S.onDown.add(function(){if(!f.paused&&f.throwEnabled&&f.shurikenHUD)if(f.shurikenHUD.count<1){var a=f.game.cache.getJSON("config").popup.outofammo;f.say(f.game.rnd.pick(Object.values(a)))}else f.throwing=!0},this)}return f(b,a),g(b,[{key:"attack",value:function(){if(this.attackEnabled&&!this.hitbox1.exists){this.animations.play("attack"),this.sfx.play(this.game.rnd.pick(["pull","pull1","swipe1"]));var a=this.scale.x;this.hitbox1.reset(this.x+70*a,this.y-60),this.hitbox1.body.velocity.x=150*a,this.drainEnergy(6)}}},{key:"throwstars",value:function(){if(this.throwEnabled){this.animations.play("throw"),this.sfx.play("swish");var a=this.scale.x,b=this.shurikens.getFirstDead(!1,this.x,this.y-70);b&&(b.lifespan=2500,b.body.velocity.x=400*a,b.animations.play("fly"),this.decreaseShuriken(1),this.drainEnergy(4))}}},{key:"heartBeatCheck",value:function(){if(!this.paused){if(this.isMoving?this.drainEnergy(2):this.isJumping?this.drainEnergy(4):this.replenishEnergy(2),this.health<30&&(this.healthBar.startWarning(),!this.playertext.alive&&this.game.time.now>this.texttimer)){var a=this.game.cache.getJSON("config").popup.dying,b=this.game.rnd.pick(Object.values(a));this.say(b),this.texttimer=this.game.time.now+6e3}if(this.energy<30&&(this.energyBar.startWarning(),!this.playertext.alive&&this.game.time.now>this.texttimer)){var c=this.game.cache.getJSON("config").popup.tiring,b=this.game.rnd.pick(Object.values(c));this.say(b),this.texttimer=this.game.time.now+6e3}}}},{key:"say",value:function(a){this.playertext.alive||(this.playertext.fixedToCamera=!1,this.playertext.setText(a),this.playertext.reset(this.x-this.game.camera.position.x,this.y-this.game.camera.position.y-120),this.playertext.lifespan=2500,this.playertext.fixedToCamera=!0)}},{key:"animationState",value:function(){this.attacking&&!this.inAir&&this.frameName==this.stillFrame&&(this.resting||this.attack()),this.throwing&&!this.inAir&&this.frameName==this.stillFrame&&(this.resting||this.throwstars()),this.inAir?this.body.velocity.y<-500?this.frameName=this.jumpUpFrame:this.body.velocity.y>100&&(this.frameName=this.jumpDownFrame):this.inAir||(Math.abs(this.body.velocity.x)>150?(this.animations.play("run"),this.isMoving=!0):(this.isMoving=!1,this.isJumping=!1,this.attackEnabled&&this.attackAnimation.isPlaying||this.throwEnabled&&this.throwAnimation.isPlaying||(this.frameName=this.stillFrame)))}},{key:"movePlayer",value:function(){this.energy<=.5||this.resting&&this.energy<5?this.resting=!0:this.resting&&this.energy>5&&(this.resting=!1);var a=this.inAir?this.airSpeed:this.speed;this.cursors.left.isDown?(this.scale.x=-1,this.resting||this.body.moveLeft(a)):this.cursors.right.isDown?(this.scale.x=1,this.resting||this.body.moveRight(a)):this.inAir||this.onslippyplatform||(this.body.velocity.x=0),this.resting||(this.cursors.up.isDown||this.spaceBar.isDown?this.jump=!0:(this.cursors.up.isUp||this.spaceBar.isUp)&&(this.jump=!1),this.checkJump())}},{key:"checkJump",value:function(){this.jump&&this.game.time.now>this.jumpTimer&&!this.inAir&&(this.body.moveUp(this.jumpPower),this.sfx.play("jump"),this.jumpTimer=this.game.time.now+this.jumpInterval,this.isJumping=!0)}},{key:"flash",value:function(a){var b=void 0;switch(a){case"red":b=this.flashRedEffect;break;case"green":b=this.flashGreenEffect}b.isRunning||b.start()}},{key:"drainEnergy",value:function(a){this.energy<=.5||(this.energy-=a,this.energyBar.setValue(this.energy/this.maxEnergy))}},{key:"replenishEnergy",value:function(a){this.energy>=this.maxEnergy||(this.energy+a>this.maxEnergy?this.energy=this.maxEnergy:this.energy+=a,this.energyBar.setValue(this.energy/this.maxEnergy))}},{key:"drainLife",value:function(a){this.health<=.5||(this.damage(a),this.healthBar.setValue(this.health/this.maxHealth))}},{key:"replenishLife",value:function(a){this.heal(a),this.healthBar.setValue(this.health/this.maxHealth)}},{key:"increaseShuriken",value:function(a){this.shurikenHUD.increaseCount(a)}},{key:"decreaseShuriken",value:function(a){this.shurikenHUD.decreaseCount(a)}},{key:"damagePlayer",value:function(a,b){var c=b||this.damageInterval;this.game.time.now>this.damageTimer&&(this.drainLife(a),this.flash("red"),this.sfx.play("damaged"),this.damageTimer=this.game.time.now+c)}},{key:"changeBody",value:function(){this.animations.add("run",Phaser.Animation.generateFrameNames("swordframe",1,8,"",0),18,!1,!1),this.stillFrame="hitframe0",this.jumpUpFrame="swordjumpframe1",this.jumpDownFrame="swordjumpframe2",this.attackAnimation=this.animations.add("attack",Phaser.Animation.generateFrameNames("hitframe",1,3,"",0),12,!1,!1),j.default.storeData("attackEnabled",!0),this.attackEnabled=!0}},{key:"throwBody",value:function(){this.throwAnimation=this.animations.add("throw",Phaser.Animation.generateFrameNames("throwframe",1,4,"",0),12,!1,!1),j.default.storeData("throwEnabled",!0),this.throwEnabled=!0}},{key:"update",value:function(){if(!this.paused){var a=this.inAir;this.inAir=!j.default.checkIfOnFloor(this.game,this),!this.inAir&&a&&j.default.playSound(this.sfx,["land"]),this.animationState(),this.movePlayer(),
this.attackEnabled&&!this.attackAnimation.isPlaying&&(this.hitbox1.exists&&this.hitbox1.kill(),this.attacking=!1),this.throwEnabled&&!this.throwAnimation.isPlaying&&(this.throwing=!1)}}}]),b}(Phaser.Sprite);c.default=k,b.exports=c.default},{"../components/Tools.js":2}],14:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("../components/Tools.js"),j=d(i),k=function(a){function b(a,c,d,f){switch(e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c,d,"popup"),this.name="popup",this.titleStyle={font:"bold 40px Century",fill:"#d9d21a"},this.defaultStyle={font:"bold 26px Century",fill:"#131a55"},this.optionStyle={font:"bold 22px Century",fill:"#131a55"},this.descriptionStyle={font:"bold 15px Century",fill:"#131a55"},this.highlightStyle={font:"bold 26px Century",fill:"#cde16d"},this.paneltype=f,this.sfx=this.game.add.audioSprite("sfx"),f){case 1:this.title=new Phaser.Text(a,512,188,"Options",this.titleStyle),this.title.anchor.setTo(.5,.5),this.title.setShadow(2,2),j.default.getData("mutetheme")?this.music=new Phaser.Text(a,340,245,"Play Music",this.defaultStyle):this.music=new Phaser.Text(a,340,245,"Mute Music",this.defaultStyle),j.default.getData("mutesound")?this.sound=new Phaser.Text(a,340,305,"Play Sound",this.defaultStyle):this.sound=new Phaser.Text(a,340,305,"Mute Sound",this.defaultStyle),this.instructions=new Phaser.Text(a,340,365,"Instructions",this.defaultStyle),this.credits=new Phaser.Text(a,340,425,"Credits",this.defaultStyle),this.back=new Phaser.Text(a,340,485,"Back",this.defaultStyle),this.addChild(this.title),this.addChild(this.music),this.addChild(this.sound),this.addChild(this.instructions),this.addChild(this.credits),this.addChild(this.back),this.highlight(this.music);break;case 2:this.title=new Phaser.Text(a,512,188,"Paused",this.titleStyle),this.title.anchor.setTo(.5,.5),this.title.setShadow(2,2),this.resume=new Phaser.Text(a,340,245,"Resume Game",this.defaultStyle),this.restart=new Phaser.Text(a,340,305,"Restart Episode",this.defaultStyle),j.default.getData("mutetheme")?this.music=new Phaser.Text(a,340,365,"Play Music",this.defaultStyle):this.music=new Phaser.Text(a,340,365,"Mute Music",this.defaultStyle),j.default.getData("mutesound")?this.sound=new Phaser.Text(a,340,425,"Play Sound",this.defaultStyle):this.sound=new Phaser.Text(a,340,425,"Mute Sound",this.defaultStyle),this.instructions=new Phaser.Text(a,340,485,"Instructions",this.defaultStyle),this.quit=new Phaser.Text(a,340,545,"Quit to Main Menu",this.defaultStyle),this.addChild(this.title),this.addChild(this.resume),this.addChild(this.restart),this.addChild(this.music),this.addChild(this.sound),this.addChild(this.instructions),this.addChild(this.quit),this.highlight(this.resume);break;case 3:this.title=new Phaser.Text(a,512,188,"Title",this.titleStyle),this.title.anchor.setTo(.5,.5),this.title.setShadow(2,2),this.description=new Phaser.Text(a,332,245,"Description",this.descriptionStyle),this.back=new Phaser.Text(a,340,560,"Got it!",this.defaultStyle),this.addChild(this.title),this.addChild(this.description),this.addChild(this.back),this.highlight(this.back);break;case 4:this.title=new Phaser.Text(a,512,188,"Choose Episode",this.titleStyle),this.title.anchor.setTo(.5,.5),this.title.setShadow(2,2),this.addChild(this.title);var g=j.default.getData("played_ep");if(g)for(var i=0,k=240;i<g.length;i++,k+=52){var l=this.game.cache.getJSON("config").popup.episodes[g[i]],m=new Phaser.Text(a,340,k,g[i]+". "+l,this.defaultStyle);this.addChild(m)}var n=new Phaser.Text(a,340,560,"Back",this.defaultStyle);this.addChild(n)}this.selectionArray=new Array;for(var o=1;o<this.children.length;o++)this.selectionArray.push(this.children[o]);"4"==this.paneltype&&(this.cursorMoved(Phaser.KeyCode.UP),this.cursorMoved(Phaser.KeyCode.UP)),this.sfx=this.game.add.audioSprite("sfx")}return f(b,a),g(b,[{key:"setTitle",value:function(a){this.title.setText(a)}},{key:"setDescription",value:function(a,b){this.description.setText(a),this.description.y+=b}},{key:"addImage",value:function(a){this.addChild(a)}},{key:"cursorMoved",value:function(a){a===Phaser.KeyCode.UP?(this.selectionArray.unshift(this.selectionArray.pop()),this.select(this.selectionArray[0])):a===Phaser.KeyCode.DOWN&&(this.selectionArray.push(this.selectionArray.shift()),this.select(this.selectionArray[0])),this.sfx.play("menuselect")}},{key:"optionEntered",value:function(){var a=this.selectionArray[0].text;switch(a){case"Mute Music":this.selectionArray[0].setText("Play Music");break;case"Mute Sound":this.selectionArray[0].setText("Play Sound");break;case"Play Music":this.selectionArray[0].setText("Mute Music");break;case"Play Sound":this.selectionArray[0].setText("Mute Sound")}return 3==this.paneltype?"Got it!":a}},{key:"select",value:function(a){var b=this;this.selectionArray.forEach(function(a){b.reset(a)}),this.highlight(a)}},{key:"highlight",value:function(a){a.setStyle(this.highlightStyle),a.setShadow(2,2,"#9a753a",.5)}},{key:"reset",value:function(a){a.setStyle(this.defaultStyle),a.setShadow()}}]),b}(Phaser.Image);c.default=k,b.exports=c.default},{"../components/Tools.js":2}],15:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("../components/Tools.js"),j=d(i),k=function(a){function b(a,c,d,f,g){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c,d,f,g),this.action=this.animations.add("action",["bodyf1","bodyf2"],4,!1,!1),a.physics.p2.enable(this,!1),this.body.clearShapes(),this.body.loadPolygon("bossbody","bossbody"),j.default.convertTileCoorToP2(c,d,this.width,this.height,this.body),this.body.fixedRotation=!0,this.body.mass=100,this.detectionrange=220,this.damageTimer=0,this.health={max:80,now:80},this.attack=!1,this.startscene=!1,this.attackTimer=0,this.bosstext=a.add.text(this.x,this.y," ",{font:"17px Century",fill:"#ffffff"}),this.bosstext.anchor.setTo(.5,.5),this.bosstext.kill(),this.rightarm=a.add.sprite(this.x,this.y,f,"rightarm"),this.rightarm.name="rightarm",a.physics.p2.enable(this.rightarm,!1),this.rightarm.body.clearShapes(),this.rightarm.body.loadPolygon("rightarm","rightarm"),this.rightarm.body.data.gravityScale=.8,this.bossconstraint=a.physics.p2.createRevoluteConstraint(this,[0,-50],this.rightarm,[600,-165],3e3),this.rightarm.body.onBeginContact.add(this.shake,this),this.flashRedEffect=this.game.add.tween(this).to({tint:16711680},50,Phaser.Easing.Bounce.out).to({tint:16484745},50,Phaser.Easing.Bounce.out).to({tint:16777215},150,Phaser.Easing.Circular.out),this.heartBeat=this.game.time.create(!1),this.heartBeat.loop(4200,this.heartBeatCheck,this),this.heartBeat.start(),this.events.onKilled.add(function(){},this)}return f(b,a),g(b,[{key:"shake",value:function(a,b,c,d,e,f){if(b){if(b.id==this.player.body.id)return;this.game.camera.shake(.03,600,!0,Phaser.Camera.SHAKE_VERTICAL,!0),this.sfx.play("bosshit")}}},{key:"damageRat",value:function(a,b){if(this.health.now<=.5)return this.say("NooooOOOOooOOOoOOOooooo...."),this.game.physics.p2.removeConstraint(this.bossconstraint),this.rightarm.kill(),void this.kill();this.game.time.now>this.damageTimer&&(this.health.now-=a,this.flashRedEffect.isRunning||this.flashRedEffect.start(),this.damageTimer=this.game.time.now+b)}},{key:"heartBeatCheck",value:function(){if(this.startscene)if(this.textarray){if(4==this.textcounter)return void(this.startscene=!1);this.say(this.textarray[this.textcounter++])}else this.textarray=Object.values(this.game.cache.getJSON("config").popup.ep6.bosstext),this.textcounter=0;this.attack&&this.alive&&this.rightarm.body.applyForce([4e3,5e3],this.rightarm.body.x+50,this.rightarm.body.y)}},{key:"say",value:function(a){this.bosstext.setText(a),this.bosstext.reset(this.x-20,this.y-172),this.bosstext.lifespan=3e3}},{key:"update",value:function(){var a=Phaser.Math.distance(this.x,this.y,this.player.x,this.player.y);this.alive&&Math.round(a)<this.detectionrange&&(this.player.x<this.x?this.body.moveLeft(200):this.body.moveRight(200)),this.attack&&!this.action.isPlaying&&this.alive&&this.animations.play("action",null,!0)}}]),b}(Phaser.Sprite);c.default=k,b.exports=c.default},{"../components/Tools.js":2}],16:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("../components/Tools.js"),j=d(i),k=function(a){function b(a,c,d,f,g){var i=this;e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c,d,f,g),this.animations.add("walk",Phaser.Animation.generateFrameNames("frame",1,4,"",0),6,!1,!1),this.attacking=this.animations.add("attack",["frame0","ratattack"],4,!1,!1),this.speed=200+a.rnd.pick([-20,20]),this.detectionrange=150,this.game.physics.p2.enable(this,!1),this.paused=!1,this.body.clearShapes(),this.body.setRectangle(.4*this.width,Math.round(.9*this.height),0,0),j.default.convertTileCoorToP2(c,d,this.width,this.height,this.body),this.body.addRectangle(80,5,0,-110),this.anchor.setTo(.6,.45),this.body.fixedRotation=!0,this.body.damping=.4,this.lastPositionX=this.x,this.stumbledInterval=1200,this.stumbledChecker=this.game.time.create(!1),this.stumbledChecker.loop(this.stumbledInterval,this.stumbledCheck,this),this.stumbledChecker.start(),this.reverseNow=!1,this.animations.play("walk",null,!0),this.damageTimer=0,this.setHealth(24),this.flashRedEffect=this.game.add.tween(this).to({tint:16711680},50,Phaser.Easing.Bounce.out).to({tint:16484745},50,Phaser.Easing.Bounce.out).to({tint:16777215},150,Phaser.Easing.Circular.out),this.flashGreenEffect=this.game.add.tween(this).to({tint:65280},50,Phaser.Easing.Bounce.out).to({tint:8650627},50,Phaser.Easing.Bounce.out).to({tint:16777215},150,Phaser.Easing.Circular.out),this.events.onKilled.add(function(){i.afterKilled()},this),this.events.onRevived.add(function(){i.flash("green")},this)}return f(b,a),g(b,[{key:"afterKilled",value:function(){var a=this;this.game.time.events.add(7800,function(){a.revive(24)},this.game)}},{key:"flash",value:function(a){var b=void 0;switch(a){case"red":b=this.flashRedEffect;break;case"green":b=this.flashGreenEffect}b.isRunning||b.start()}},{key:"stumbledCheck",value:function(){this.attacking.isPlaying||(Math.abs(this.x-this.lastPositionX)>20?this.lastPositionX=this.x:this.reverseNow=!0)}},{key:"damageRat",value:function(a,b){this.health<=.5||this.game.time.now>this.damageTimer&&(this.damage(a),this.flash("red"),this.damageTimer=this.game.time.now+b)}},{key:"attack",value:function(a){!this.attacking.isPlaying&&this.alive&&this.sfx.play(this.game.rnd.pick(["mnstr7","mnstr8","mnstr9"])),this.player.x<this.x?this.scale.x=-1:this.scale.x=1,this.animations.play("attack")}},{key:"update",value:function(){if(!this.paused){var a=Phaser.Math.distance(this.x,this.y,this.player.x,this.player.y);Math.round(a)<this.detectionrange&&this.attack(a),this.attacking.isPlaying||(this.body.velocity.x=this.speed,this.animations.play("walk",null,!0),this.reverseNow&&(this.speed*=-1,this.scale.x=this.speed>0?1:-1,this.reverseNow=!1),this.scale.x=this.speed>0?1:-1)}}}]),b}(Phaser.Sprite);c.default=k,b.exports=c.default},{"../components/Tools.js":2}],17:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("../components/Tools.js"),j=d(i),k=function(a){function b(a,c,d,f,g){var i=this;e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c,d,f,g),this.throwing=this.animations.add("throw",["throwframe1","throwframe2","throwframe3"],12,!1,!1),this.game.physics.p2.enable(this,!1),this.body.clearShapes(),this.body.setRectangle(.4*this.width,Math.round(.8*this.height),0,0),j.default.convertTileCoorToP2(c,d,this.width,this.height,this.body),this.body.addRectangle(80,5,0,-100),this.anchor.setTo(.6,.45),this.body.fixedRotation=!0,this.detectionrange=500,this.damageTimer=0,this.throwTimer=0,this.throwInterval=2400,this.setHealth(40),this.shurikens=this.game.add.group(this.game.world,"ninjashurikens",!1,!0,1),this.shurikens.createMultiple(10,f,"s1"),this.shurikens.forEach(function(a){a.body.clearShapes(),a.body.setCircle(a.width/2),a.animations.add("fly",Phaser.Animation.generateFrameNames("s",1,3,"",0),25,!0,!1),a.body.kinematic=!0,a.body.damping=.2},this.game.world),this.flashRedEffect=this.game.add.tween(this).to({tint:16711680},50,Phaser.Easing.Bounce.out).to({tint:16484745},50,Phaser.Easing.Bounce.out).to({tint:16777215},150,Phaser.Easing.Circular.out),this.flashGreenEffect=this.game.add.tween(this).to({tint:65280},50,Phaser.Easing.Bounce.out).to({tint:8650627},50,Phaser.Easing.Bounce.out).to({tint:16777215},150,Phaser.Easing.Circular.out),this.events.onKilled.add(function(){i.afterKilled()},this),this.events.onRevived.add(function(){i.flash("green")},this)}return f(b,a),g(b,[{key:"afterKilled",value:function(){var a=this;this.game.time.events.add(7800,function(){a.revive(40)},this.game)}},{key:"flash",value:function(a){var b=void 0;switch(a){case"red":b=this.flashRedEffect;break;case"green":b=this.flashGreenEffect}b.isRunning||b.start()}},{key:"damageRat",value:function(a,b){this.health<=.5||this.game.time.now>this.damageTimer&&(this.damage(a),this.flash("red"),this.damageTimer=this.game.time.now+b)}},{key:"throwStars",value:function(){this.animations.play("throw");var a=this.scale.x,b=this.shurikens.getFirstDead(!1,this.x+50*a,this.y+15);b&&(b.lifespan=2500,b.body.velocity.x=320*a,b.animations.play("fly"))}},{key:"update",value:function(){if(!this.paused){var a=Phaser.Math.distance(this.x,this.y,this.player.x,this.player.y);Math.round(a)<this.detectionrange&&(this.player.x<this.x?this.scale.x=-1:this.scale.x=1,this.game.time.now>this.throwTimer&&this.alive&&(this.throwStars(),this.throwTimer=this.game.time.now+this.throwInterval)),this.throwing.isPlaying||(this.frameName="throwframe1")}}}]),b}(Phaser.Sprite);c.default=k,b.exports=c.default},{"../components/Tools.js":2}],18:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("./RatGrunt.js"),j=d(i),k=function(a){function b(a,c,d,f,g){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c,d,f,g),this.attacking=this.animations.add("attack",["hitframe0","hitframe1","hitframe2","hitframe3"],2.5,!1,!1),this.detectionrange=260,this.hitrange=150,this.hitspeed=140,this.hitinterval=1200,this.hittimer=0,this.setHealth(40),this.hitbox1=this.addChild(a.make.sprite(this.x,this.y,"objects1","stop")),this.game.physics.p2.enable(this.hitbox1,!1),this.hitbox1.body.kinematic=!0,this.hitbox1.name="soldierclub",this.hitbox1.alpha=0,this.hitbox1.kill()}return f(b,a),g(b,[{key:"afterKilled",value:function(){var a=this;this.hitbox1.kill(),this.game.time.events.add(7200,function(){a.revive(40),a.hitbox1.revive()},this.game)}},{key:"attack",value:function(a){this.player.x<this.x?this.scale.x=-1:this.scale.x=1;var b=this.scale.x;Math.round(a)>160&&(this.body.velocity.x=b*this.hitspeed),this.hitbox1.exists||(this.animations.play("attack"),this.game.time.now>this.hittimer&&this.alive&&(this.hitbox1.reset(this.x+10*b,this.y+30),this.hitbox1.body.velocity.x=150*b,this.hitbox1.lifespan=600,this.hittimer=this.game.time.now+this.hitinterval))}},{key:"update",value:function(){h(Object.getPrototypeOf(b.prototype),"update",this).call(this),!this.attacking.isPlaying&&this.hitbox1.exists&&this.hitbox1.kill()}}]),b}(j.default);c.default=k,b.exports=c.default},{"./RatGrunt.js":16}],19:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=function(a){function b(a,c,e){d(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),this.style={font:"bold 20px Century",fill:"#f6f6de"},this.count=0,this.holder=this.create(c,e,"objects4","shurikens"),this.counttext=this.add(new Phaser.Text(a,c+70,e+12,"x "+this.count,this.style)),this.holder.alpha=0,this.counttext.alpha=0,this.fixedToCamera=!0}return e(b,a),f(b,[{key:"increaseCount",value:function(a){0==this.holder.alpha&&(this.holder.alpha=1),0==this.counttext.alpha&&(this.counttext.alpha=1),this.count+=a,this.counttext.setText("x "+this.count)}},{key:"decreaseCount",value:function(a){this.count-=a,this.counttext.setText("x "+this.count),this.count<1&&(this.holder.alpha=0,this.counttext.alpha=0)}}]),b}(Phaser.Group);c.default=h,b.exports=c.default},{}],20:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("../components/Tools.js"),j=d(i),k=function(a){function b(a,c,d,f,g){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c,d,f,g),this.game.physics.p2.enable(this,!1),this.body.static=!0,j.default.convertTileCoorToP2(c,d,this.width,this.height,this.body),this.body.clearShapes(),this.body.loadPolygon("stalacites",g)}return f(b,a),g(b,[{key:"update",value:function(){}}]),b}(Phaser.Sprite);c.default=k,b.exports=c.default},{"../components/Tools.js":2}],21:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=function(a){function b(a,c){d(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,512,384,c),this.anchor.setTo(.5,.5),this.fixedToCamera=!0;var e={font:"bold 36px Century",fill:"#ffffff"};this.setStyle(e),a.add.tween(this).to({alpha:0},4600,Phaser.Easing.Quadratic.Out,!0)}return e(b,a),f(b,[{key:"update",value:function(){0==this.alpha&&this.destroy()}}]),b}(Phaser.Text);c.default=h,b.exports=c.default},{}],22:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var f=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},g=function(a){function b(a,c,e,g,h){d(this,b),f(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c,e,g,h),this.anchor.setTo(0,1),this.game.add.tween(this).to({y:e-8*Math.sin(c*(Math.PI/180))},800,Phaser.Easing.Back.In,!0,0,1/0,!0)}return e(b,a),b}(Phaser.Sprite);c.default=g,b.exports=c.default},{}],23:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"preload",value:function(){this.load.image("splashscreen","assets/menu/splashscreenbare.png"),this.load.image("animeffect","assets/menu/animeffect.png"),this.load.image("start","assets/menu/startselect.png"),this.load.image("continue","assets/menu/continueselect.png"),this.load.image("options","assets/menu/optionsselect.png"),this.load.image("wordings","assets/menu/wordings.png"),this.load.image("popup","assets/menu/popuppanel.png"),this.load.audioSprite("sfx",["assets/audio/sfx/sfx.ogg","assets/audio/sfx/sfx.mp3","assets/audio/sfx/sfx.m4a","assets/audio/sfx/sfx.mc3"],"assets/audio/sfx/sfx.json"),this.load.json("config","assets/config/Config.json"),this.stage.backgroundColor="#22226a",this.load.image("preloader","assets/menu/loadingbar.png")}},{key:"create",value:function(){this.input.maxPointers=1,this.input.mspointer.capture=!1,this.state.start("menu")}}]),a}();c.default=f,b.exports=c.default},{}],24:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("../prefabs/Player.js"),j=d(i),k=a("../prefabs/EntranceDoor.js"),l=d(k),m=a("../prefabs/BlockingObjects.js"),n=d(m),o=a("../prefabs/Collectables.js"),p=d(o),q=a("../prefabs/WavesObjects.js"),r=d(q),s=a("../prefabs/Platforms.js"),t=d(s),u=a("../prefabs/HealthBar.js"),v=d(u),w=a("../prefabs/EnergyBar.js"),x=d(w),y=a("../prefabs/RatGrunt.js"),z=d(y),A=a("../prefabs/RatSoldier.js"),B=(d(A),a("../prefabs/EnemyStops.js")),C=d(B),D=a("../prefabs/Popup.js"),E=d(D),F=a("../components/Tools.js"),G=d(F),H=a("../prefabs/CheeseScore.js"),I=d(H),J=a("../prefabs/TitleText.js"),K=d(J),L=function(a){function b(){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this)}return f(b,a),g(b,[{key:"create",value:function(){var a=this;this.physics.startSystem(Phaser.Physics.P2JS),this.physics.p2.gravity.y=800,this.physics.p2.world.defaultContactMaterial.friction=.42,this.physics.p2.world.setGlobalStiffness(1e5),this.map=this.add.tilemap("ep1"),this.map.addTilesetImage("tile"),this.bg=this.map.createLayer("background"),this.bg.scrollFactorX=.7,this.bg.scrollFactorY=.7,this.layer=this.map.createLayer("tiles"),this.layer.resizeWorld(),this.map.setCollisionBetween(1,106,!0,this.layer);var b=this.physics.p2.convertTilemap(this.map,this.layer);this.map.createLayer("decorative"),this.map.createFromObjects("movingwaves",184,"objects1","watertile",!0,!1,this.world,r.default),this.damageZone=new Phaser.Rectangle(1200,2100,400,100),this.platformsGroup=this.add.group(),this.map.createFromObjects("platforms",183,"objects1","slippery2",!0,!1,this.platformsGroup,t.default),this.slippery=this.platformsGroup.getTop();var c=this.physics.p2.createMaterial("slipperyMaterial",this.slippery.body);this.blockingGroup=this.add.group(),G.default.findObjectInLayer(this.map,"blockingobjects").forEach(function(b){a.map.createFromObjects("blockingobjects",b.gid,"objects1",b.name,!0,!1,a.blockingGroup,n.default)}),this.collectablesGroup=this.add.group(),G.default.findObjectInLayer(this.map,"collectables").forEach(function(b){a.map.createFromObjects("collectables",b.gid,"objects1",b.name,!0,!1,a.collectablesGroup,p.default)}),this.map.createFromObjects("door",176,"objects1","entrancedoor",!0,!1,this.world,l.default),this.entrancedoor=this.world.getTop(),this.player=new j.default(this.game,260,this.world._height-200),this.sound.stopAll(),this.sfx=this.add.audioSprite("sfx"),this.theme=this.add.audioSprite("theme"),G.default.getData("mutesound")&&G.default.muteOrPlay(this.sfx,!0),G.default.getData("mutetheme")&&G.default.muteOrPlay(this.theme,!0),this.player.sfx=this.sfx;var d=this.physics.p2.createMaterial("playerMaterial",this.player.body);this.physics.p2.createContactMaterial(d,c,{friction:.35,surfaceVelocity:-1e3});this.add.existing(this.player),this.ratGruntGroup=this.add.group(),this.map.createFromObjects("enemies",187,"ratgrunt","frame0",!0,!1,this.ratGruntGroup,z.default),this.ratGruntGroup.forEach(function(b){b.player=a.player,b.sfx=a.sfx},this),this.stopsGroup=this.add.group(),G.default.findObjectInLayer(this.map,"enemystops").forEach(function(b){
a.map.createFromObjects("enemystops",b.gid,"objects1",b.name,!0,!1,a.stopsGroup,C.default)}),this.map.createLayer("decorative2"),this.healthBar=new v.default(this.game,20,20),this.energyBar=new x.default(this.game,31,80),this.player.energyBar=this.energyBar,this.player.healthBar=this.healthBar,this.player.ratGroup=this.ratGruntGroup,this.cheeseScore=new I.default(this.game,460,20,2),this.camera.follow(this.player),this.physics.p2.setImpactEvents(!0);var e=this.physics.p2.createCollisionGroup(),f=this.physics.p2.createCollisionGroup(),g=this.physics.p2.createCollisionGroup(),h=this.physics.p2.createCollisionGroup(),i=this.physics.p2.createCollisionGroup(),k=this.physics.p2.createCollisionGroup(),m=this.physics.p2.createCollisionGroup(),o=this.physics.p2.createCollisionGroup(),q=this.physics.p2.createCollisionGroup();this.physics.p2.updateBoundsCollisionGroup(),b.forEach(function(a){a.setCollisionGroup(e),a.collides([g,i,h,k])}),this.platformsGroup.forEach(function(a){a.body.setCollisionGroup(f),a.body.collides([g,i,k])},this),this.player.body.setCollisionGroup(g),this.player.body.collides([e,h,f,i,k,q],this.platformHitListener,this),this.player.hitbox1.body.setCollisionGroup(o),this.player.hitbox1.body.collides(k,this.playerHitListener,this),this.blockingGroup.forEach(function(a){a.body.setCollisionGroup(h),a.body.collides([g,i,k,e])},this),this.collectablesGroup.forEach(function(b){b.body.setCollisionGroup(i),b.body.collides([e,f,h]),b.body.collides(g,a.collectablesListener,a)},this),this.ratGruntGroup.forEach(function(b){b.body.setCollisionGroup(k),b.body.collides([e,f,h,m,o]),b.body.collides(g,a.enemyHitListener,a)},this),this.stopsGroup.forEach(function(a){a.body.setCollisionGroup(m),a.body.collides(k)},this),this.entrancedoor.body.setCollisionGroup(q),this.entrancedoor.body.collides(g,this.nextEpisode,this),this.input.keyboard.addKeyCapture([Phaser.Keyboard.SPACE,Phaser.Keyboard.UP,Phaser.Keyboard.LEFT,Phaser.Keyboard.RIGHT]),this.naviKeys=this.input.keyboard.addKeys({up:Phaser.KeyCode.UP,down:Phaser.KeyCode.DOWN,enter:Phaser.KeyCode.ENTER,esc:Phaser.KeyCode.ESC}),this.naviKeys.esc.onDown.add(function(){a.game.paused?a.resumeGame():(a.game.paused=!0,a.popup=new E.default(a.game,a.camera.x,a.camera.y,2),a.world.addChild(a.popup))},this),this.naviKeys.up.onDown.add(function(b){a.game.paused&&a.popup.cursorMoved(b.keyCode)},this),this.naviKeys.down.onDown.add(function(b){a.game.paused&&a.popup.cursorMoved(b.keyCode)},this),this.naviKeys.enter.onDown.add(function(){a.game.paused&&a.processSelection()},this),this.game.onPause.add(function(){this.sound.unsetMute()},this),this.theme.sounds.Obliteration.play("Obliteration",null,.3,!0),this.time.advancedTiming=!0,this.titletext=new K.default(this.game,"Ep 1. The Apprenticeship"),this.add.existing(this.titletext),this.tipsmarker=[!1,!1,!1,!1,!1,!1]}},{key:"update",value:function(){this.damageZone.intersectsRaw(this.player.left,this.player.right,this.player.top,this.player.bottom)&&(this.tipspopper(1),G.default.playSound(this.sfx,["Footstep_Water_01","Footstep_Water_02","Footstep_Water_03"]),this.player.damagePlayer(4)),this.player.y>2140&&this.tipspopper(0),this.player.x>790&&this.player.y<927&&this.tipspopper(5)}},{key:"tipspopper",value:function(a){if(!this.tipsmarker[a]){this.game.paused=!0;var b=new E.default(this.game,this.camera.x,this.camera.y,3),c=this.cache.getJSON("config").popup.ep1.tips[a];b.setTitle(c.title),c.description&&b.setDescription(c.description,0),this.tipsmarker[a]=!0,this.world.addChild(b),this.enableCursorKeys(!1)}}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}},{key:"nextEpisode",value:function(a,b){b.sprite&&"player"===b.sprite.key&&(this.cheeseScore.addToTotalScore(1),this.state.start("preload",!0,!1,"ep2"))}},{key:"resumeGame",value:function(){var a=this.world.getTop();"popup"===a.key&&(this.world.removeChild(a),a.destroy()),this.game.paused=!1}},{key:"processSelection",value:function(){var a=this.world.getTop().optionEntered();if(a)switch(a){case"Resume Game":this.resumeGame();break;case"Restart Episode":this.resumeGame(),this.state.start("ep1");break;case"Instructions":this.popupInstruction=new E.default(this.game,this.camera.x,this.camera.y,3);var b=this.cache.getJSON("config").popup.instructions;this.popupInstruction.setTitle(b.title),this.popupInstruction.setDescription(b.description,0),this.world.removeChild(this.popup),this.world.addChild(this.popupInstruction),this.enableCursorKeys(!1);break;case"Got it!":this.enableCursorKeys(!0),this.resumeGame();break;case"Quit to Main Menu":this.resumeGame(),this.state.start("menu");break;case"Mute Music":G.default.storeData("mutetheme",!0),G.default.muteOrPlay(this.theme,!0);break;case"Mute Sound":G.default.storeData("mutesound",!0),G.default.muteOrPlay(this.sfx,!0);break;case"Play Music":G.default.storeData("mutetheme",!1),G.default.muteOrPlay(this.theme,!1);break;case"Play Sound":G.default.storeData("mutesound",!1),G.default.muteOrPlay(this.sfx,!1)}}},{key:"enableCursorKeys",value:function(a){this.naviKeys.up.enabled=a,this.naviKeys.down.enabled=a}},{key:"platformHitListener",value:function(a,b,c,d){!b.sprite||"slippery1"!=b.sprite.frameName&&"slippery2"!=b.sprite.frameName?this.player.onslippyplatform&&(this.player.onslippyplatform=!1):(this.tipspopper(3),G.default.playSound(this.sfx,["slime7","slime8","slime9"]),this.player.onslippyplatform=!0)}},{key:"enemyHitListener",value:function(a,b,c,d){b.sprite&&"player"===b.sprite.key&&c===a.data.shapes[0]&&this.player.damagePlayer(5)}},{key:"playerHitListener",value:function(a,b,c,d){b.sprite&&b.sprite.damageRat(8,400)}},{key:"collectablesListener",value:function(a,b,c,d){if(b.sprite&&"player"===b.sprite.key){switch(a.sprite.frameName){case"cheese1":this.tipspopper(2),this.player.replenishEnergy(10),this.cheeseScore.increaseScore(2),this.sfx.play("Rise04");break;case"cheese2":case"cheese3":this.player.replenishEnergy(5),this.cheeseScore.increaseScore(1),this.sfx.play("Rise04");break;case"wineglass":this.tipspopper(4),this.player.replenishLife(10),this.sfx.play("Rise04");break;case"winebottle":this.tipspopper(6),this.player.replenishLife(20),this.sfx.play("Rise04")}this.player.flash("green"),a.sprite.destroy()}}}]),b}(Phaser.State);c.default=L,b.exports=c.default},{"../components/Tools.js":2,"../prefabs/BlockingObjects.js":3,"../prefabs/CheeseScore.js":6,"../prefabs/Collectables.js":7,"../prefabs/EnemyStops.js":8,"../prefabs/EnergyBar.js":9,"../prefabs/EntranceDoor.js":10,"../prefabs/HealthBar.js":11,"../prefabs/Platforms.js":12,"../prefabs/Player.js":13,"../prefabs/Popup.js":14,"../prefabs/RatGrunt.js":16,"../prefabs/RatSoldier.js":18,"../prefabs/TitleText.js":21,"../prefabs/WavesObjects.js":22}],25:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("../prefabs/Player.js"),j=d(i),k=a("../prefabs/EntranceDoor.js"),l=d(k),m=a("../prefabs/BlockingObjects.js"),n=d(m),o=a("../prefabs/Collectables.js"),p=d(o),q=a("../prefabs/WavesObjects.js"),r=d(q),s=a("../prefabs/Platforms.js"),t=d(s),u=a("../prefabs/HealthBar.js"),v=d(u),w=a("../prefabs/EnergyBar.js"),x=d(w),y=a("../prefabs/RatGrunt.js"),z=d(y),A=a("../prefabs/RatSoldier.js"),B=d(A),C=a("../prefabs/Stalacites.js"),D=d(C),E=a("../prefabs/EnemyStops.js"),F=d(E),G=a("../prefabs/Popup.js"),H=d(G),I=a("../components/Tools.js"),J=d(I),K=a("../prefabs/CheeseScore.js"),L=d(K),M=a("../prefabs/TitleText.js"),N=d(M),O=function(a){function b(){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this)}return f(b,a),g(b,[{key:"create",value:function(){var a=this;this.physics.startSystem(Phaser.Physics.P2JS),this.physics.p2.gravity.y=800,this.physics.p2.world.defaultContactMaterial.friction=.42,this.physics.p2.world.setGlobalStiffness(1e5),this.map=this.add.tilemap("ep2"),this.map.addTilesetImage("tile"),this.bg=this.map.createLayer("background"),this.bg.scrollFactorX=.7,this.bg.scrollFactorY=.7,this.layer=this.map.createLayer("tiles"),this.layer.resizeWorld(),this.map.setCollisionBetween(1,106,!0,this.layer);var b=this.physics.p2.convertTilemap(this.map,this.layer);this.map.createLayer("decorative"),this.map.createFromObjects("movingwaves",184,"objects1","watertile",!0,!1,this.world,r.default),this.damageZone=new Phaser.Rectangle(1700,3580,800,100),this.platformsGroup=this.add.group();var c=new Array;J.default.findUniqueGIDInLayer(this.map,"platforms").forEach(function(b){a.map.createFromObjects("platforms",b.gid,"objects1",b.name,!0,!1,a.platformsGroup,t.default)}),this.platformsGroup.forEach(function(b){c.push(a.physics.p2.createMaterial("slipperyMaterial",b.body))},this),this.blockingGroup=this.add.group(),J.default.findUniqueGIDInLayer(this.map,"blockingobjects").forEach(function(b){a.map.createFromObjects("blockingobjects",b.gid,"objects1",b.name,!0,!1,a.blockingGroup,n.default)}),this.collectablesGroup=this.add.group(),J.default.findUniqueGIDInLayer(this.map,"collectables").forEach(function(b){a.map.createFromObjects("collectables",b.gid,"objects1",b.name,!0,!1,a.collectablesGroup,p.default)}),this.map.createFromObjects("weapons",190,"objects2","sword1",!0,!1,this.collectablesGroup,p.default),this.stalacitesGroup=this.add.group(),J.default.findUniqueGIDInLayer(this.map,"stalacites").forEach(function(b){a.map.createFromObjects("stalacites",b.gid,"objects2",b.name,!0,!1,a.stalacitesGroup,D.default)}),this.map.createFromObjects("torii1",193,"objects2","torii1"),this.toriiGroup=this.add.group(),this.toriiRect1=this.add.graphics(1480,800,this.toriiGroup),this.toriiRect1.clear(),this.toriiRect1.drawRect(0,0,530,28),this.physics.p2.enable(this.toriiRect1,!1),this.toriiRect1.body.static=!0,J.default.convertTileCoorToP2(1480,800,530,28,this.toriiRect1.body),this.map.createFromObjects("door",176,"objects1","entrancedoor",!0,!1,this.world,l.default),this.entrancedoor=this.world.getTop(),this.player=new j.default(this.game,260,this.world._height-200);var d=this.physics.p2.createMaterial("playerMaterial",this.player.body);this.physics.p2.createContactMaterial(d,c[0],{friction:.35,surfaceVelocity:-1e3}),this.physics.p2.createContactMaterial(d,c[1],{friction:.35,surfaceVelocity:1e3}),this.physics.p2.createContactMaterial(d,c[2],{friction:.35,surfaceVelocity:-1e3}),this.physics.p2.createContactMaterial(d,c[3],{friction:.35,surfaceVelocity:-1e3}),this.physics.p2.createContactMaterial(d,c[4],{friction:.35,surfaceVelocity:-1e3}),this.physics.p2.createContactMaterial(d,c[5],{friction:.35,surfaceVelocity:1e3}),this.physics.p2.createContactMaterial(d,c[6],{friction:.35,surfaceVelocity:1e3}),this.add.existing(this.player),this.camera.follow(this.player),this.map.createFromObjects("torii2",194,"objects2","torii2"),this.sound.stopAll(),this.sfx=this.add.audioSprite("sfx"),this.theme=this.add.audioSprite("theme"),J.default.getData("mutesound")&&J.default.muteOrPlay(this.sfx,!0),J.default.getData("mutetheme")&&J.default.muteOrPlay(this.theme,!0),this.player.sfx=this.sfx,this.ratGroup=this.add.group(),this.map.createFromObjects("ratgrunts",187,"ratgrunt","frame0",!0,!1,this.ratGroup,z.default),this.map.createFromObjects("ratsoldiers",195,"ratsoldier","hitframe0",!0,!1,this.ratGroup,B.default),this.ratGroup.forEach(function(b){b.player=a.player,b.sfx=a.sfx},this),this.stopsGroup=this.add.group(),J.default.findUniqueGIDInLayer(this.map,"enemystops").forEach(function(b){a.map.createFromObjects("enemystops",b.gid,"objects1",b.name,!0,!1,a.stopsGroup,F.default)}),this.map.createLayer("decorative2"),this.healthBar=new v.default(this.game,20,20),this.energyBar=new x.default(this.game,31,80),this.player.energyBar=this.energyBar,this.player.healthBar=this.healthBar,this.cheeseScore=new L.default(this.game,460,20,9),this.physics.p2.setImpactEvents(!0);var e=this.physics.p2.createCollisionGroup(),f=this.physics.p2.createCollisionGroup(),g=this.physics.p2.createCollisionGroup(),h=this.physics.p2.createCollisionGroup(),i=this.physics.p2.createCollisionGroup(),k=this.physics.p2.createCollisionGroup(),m=this.physics.p2.createCollisionGroup(),o=this.physics.p2.createCollisionGroup(),q=this.physics.p2.createCollisionGroup(),s=this.physics.p2.createCollisionGroup(),u=this.physics.p2.createCollisionGroup(),w=this.physics.p2.createCollisionGroup();this.physics.p2.updateBoundsCollisionGroup(),b.forEach(function(a){a.setCollisionGroup(e),a.collides([i,q,o,s])}),this.platformsGroup.forEach(function(a){a.body.setCollisionGroup(f),a.body.collides([i,q,s])},this),this.stalacitesGroup.forEach(function(b){b.body.setCollisionGroup(g),b.body.collides(s),b.body.collides(i,a.enemyHitListener,a)},this),this.toriiGroup.forEach(function(a){a.body.setCollisionGroup(h),a.body.collides([i,q,s])},this),this.player.body.setCollisionGroup(i),this.player.body.collides([e,g,h,o,f,q,s,m,w],this.platformHitListener,this),this.player.hitbox1.body.setCollisionGroup(k),this.player.hitbox1.body.collides(s,this.playerHitListener,this),this.blockingGroup.forEach(function(a){a.body.setCollisionGroup(o),a.body.collides([i,q,s,e])},this),this.collectablesGroup.forEach(function(b){b.body.setCollisionGroup(q),b.body.collides([e,f,o,h]),b.body.collides(i,a.collectablesListener,a)},this),this.ratGroup.forEach(function(b){b.body.setCollisionGroup(s),b.body.collides([e,f,h,g,o,u,k]),b.body.collides(i,a.enemyHitListener,a),"ratsoldier"==b.key&&(b.hitbox1.body.setCollisionGroup(m),b.hitbox1.body.collides(i,a.enemyHitListener,a))},this),this.stopsGroup.forEach(function(a){a.body.setCollisionGroup(u),a.body.collides(s)},this),this.entrancedoor.body.setCollisionGroup(w),this.entrancedoor.body.collides(i,this.nextEpisode,this),this.input.keyboard.addKeyCapture([Phaser.Keyboard.SPACE,Phaser.Keyboard.UP,Phaser.Keyboard.LEFT,Phaser.Keyboard.RIGHT]),this.naviKeys=this.input.keyboard.addKeys({up:Phaser.KeyCode.UP,down:Phaser.KeyCode.DOWN,enter:Phaser.KeyCode.ENTER,esc:Phaser.KeyCode.ESC}),this.naviKeys.esc.onDown.add(function(){a.game.paused?a.resumeGame():(a.game.paused=!0,a.popup=new H.default(a.game,a.camera.x,a.camera.y,2),a.world.addChild(a.popup))},this),this.naviKeys.up.onDown.add(function(b){a.game.paused&&a.popup.cursorMoved(b.keyCode)},this),this.naviKeys.down.onDown.add(function(b){a.game.paused&&a.popup.cursorMoved(b.keyCode)},this),this.naviKeys.enter.onDown.add(function(){a.game.paused&&a.processSelection()},this),this.game.onPause.add(function(){a.sound.unsetMute()},this),this.theme.sounds["Hiding Your Reality"].play("Hiding Your Reality",null,.4,!0),this.titletext=new N.default(this.game,"Ep 2. The Rat Infestation"),this.add.existing(this.titletext),this.time.advancedTiming=!0,this.tipsmarker=[!1,!1]}},{key:"update",value:function(){this.damageZone.intersectsRaw(this.player.left,this.player.right,this.player.top,this.player.bottom)&&(J.default.playSound(this.sfx,["Footstep_Water_04","Footstep_Water_05","Footstep_Water_06"]),this.player.damagePlayer(4))}},{key:"nextEpisode",value:function(a,b){b.sprite&&"player"===b.sprite.key&&(this.cheeseScore.addToTotalScore(2),this.state.start("preload",!0,!1,"ep3"))}},{key:"resumeGame",value:function(){var a=this.world.getTop();"popup"===a.key&&(this.world.removeChild(a),a.destroy()),this.game.paused=!1}},{key:"processSelection",value:function(){var a=this.world.getTop().optionEntered();if(a)switch(a){case"Resume Game":this.resumeGame();break;case"Restart Episode":this.resumeGame(),this.state.start("ep2");break;case"Instructions":this.popupInstruction=new H.default(this.game,this.camera.x,this.camera.y,3);var b=this.cache.getJSON("config").popup.instructions;this.popupInstruction.setTitle(b.title),this.popupInstruction.setDescription(b.description,0),this.world.removeChild(this.popup),this.world.addChild(this.popupInstruction),this.enableCursorKeys(!1);break;case"Got it!":this.enableCursorKeys(!0),this.resumeGame();break;case"Quit to Main Menu":this.resumeGame(),this.state.start("menu");break;case"Mute Music":J.default.storeData("mutetheme",!0),J.default.muteOrPlay(this.theme,!0);break;case"Mute Sound":J.default.storeData("mutesound",!0),J.default.muteOrPlay(this.sfx,!0);break;case"Play Music":J.default.storeData("mutetheme",!1),J.default.muteOrPlay(this.theme,!1);break;case"Play Sound":J.default.storeData("mutesound",!1),J.default.muteOrPlay(this.sfx,!1)}}},{key:"enableCursorKeys",value:function(a){this.naviKeys.up.enabled=a,this.naviKeys.down.enabled=a}},{key:"platformHitListener",value:function(a,b,c,d){!b.sprite||"slippery1"!=b.sprite.frameName&&"slippery2"!=b.sprite.frameName?this.player.onslippyplatform&&(this.player.onslippyplatform=!1):(J.default.playSound(this.sfx,["slime7","slime8","slime9"]),this.player.onslippyplatform=!0)}},{key:"collectablesListener",value:function(a,b,c,d){if(b.sprite&&"player"===b.sprite.key){switch(a.sprite.frameName){case"cheese1":this.player.replenishEnergy(10),this.cheeseScore.increaseScore(2),this.sfx.play("Rise04");break;case"cheese2":case"cheese3":this.player.replenishEnergy(5),this.cheeseScore.increaseScore(1),this.sfx.play("Rise04");break;case"wineglass":case"martiniglass":this.player.replenishLife(10),this.sfx.play("Rise04");break;case"winebottle":this.player.replenishLife(20),this.sfx.play("Rise04");break;case"sword1":this.sfx.play("collectsword"),this.player.changeBody(),this.tipspopper(0)}this.player.flash("green"),a.sprite.destroy()}}},{key:"tipspopper",value:function(a){if(!this.tipsmarker[a]){this.game.paused=!0;var b=new H.default(this.game,this.camera.x,this.camera.y,3),c=this.cache.getJSON("config").popup.ep2.tips[a];b.setTitle(c.title),c.description&&b.setDescription(c.description,0),this.tipsmarker[a]=!0,this.world.addChild(b),this.enableCursorKeys(!1)}}},{key:"enemyHitListener",value:function(a,b,c,d){if(b.sprite&&"player"===b.sprite.key&&a.sprite)switch(a.sprite.key){case"ratgrunt":c===a.data.shapes[0]&&this.player.damagePlayer(5);break;case"ratsoldier":c===a.data.shapes[0]&&this.player.damagePlayer(8);break;case"objects2":var e=a.sprite.frameName;(/^upper\d{1}/.test(e)||/^below\d{1}/.test(e))&&this.player.damagePlayer(4);break;case"objects1":"stop"==a.sprite.frameName&&this.player.damagePlayer(5,200)}}},{key:"playerHitListener",value:function(a,b,c,d){b.sprite&&b.sprite.damageRat(8,400)}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}}]),b}(Phaser.State);c.default=O,b.exports=c.default},{"../components/Tools.js":2,"../prefabs/BlockingObjects.js":3,"../prefabs/CheeseScore.js":6,"../prefabs/Collectables.js":7,"../prefabs/EnemyStops.js":8,"../prefabs/EnergyBar.js":9,"../prefabs/EntranceDoor.js":10,"../prefabs/HealthBar.js":11,"../prefabs/Platforms.js":12,"../prefabs/Player.js":13,"../prefabs/Popup.js":14,"../prefabs/RatGrunt.js":16,"../prefabs/RatSoldier.js":18,"../prefabs/Stalacites.js":20,"../prefabs/TitleText.js":21,"../prefabs/WavesObjects.js":22}],26:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("../prefabs/Player.js"),j=d(i),k=a("../prefabs/EntranceDoor.js"),l=d(k),m=a("../prefabs/BlockingObjects.js"),n=d(m),o=a("../prefabs/Collectables.js"),p=d(o),q=a("../prefabs/WavesObjects.js"),r=d(q),s=a("../prefabs/Platforms.js"),t=d(s),u=a("../prefabs/HealthBar.js"),v=d(u),w=a("../prefabs/EnergyBar.js"),x=d(w),y=a("../prefabs/RatGrunt.js"),z=d(y),A=a("../prefabs/RatSoldier.js"),B=d(A),C=a("../prefabs/Cat.js"),D=d(C),E=a("../prefabs/Stalacites.js"),F=d(E),G=a("../prefabs/EnemyStops.js"),H=d(G),I=a("../prefabs/Popup.js"),J=d(I),K=a("../components/Tools.js"),L=d(K),M=a("../prefabs/CheeseScore.js"),N=d(M),O=a("../prefabs/TitleText.js"),P=d(O),Q=function(a){function b(){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this)}return f(b,a),g(b,[{key:"create",value:function(){var a=this;this.physics.startSystem(Phaser.Physics.P2JS),this.physics.p2.gravity.y=800,this.physics.p2.world.defaultContactMaterial.friction=.42,this.physics.p2.world.setGlobalStiffness(1e5),this.map=this.add.tilemap("ep3"),this.map.addTilesetImage("tile"),this.bg=this.map.createLayer("background"),this.bg.scrollFactorX=.7,this.bg.scrollFactorY=.7,this.layer=this.map.createLayer("tiles"),this.layer.resizeWorld(),this.map.setCollisionBetween(1,106,!0,this.layer);var b=this.physics.p2.convertTilemap(this.map,this.layer);this.map.createLayer("decorative"),this.map.createFromObjects("movingwaves",184,"objects1","watertile",!0,!1,this.world,r.default),this.damageZone=new Phaser.Rectangle(150,3700,300,120),this.damageZone1=new Phaser.Rectangle(1540,1160,400,120),this.platformsGroup=this.add.group();var c=new Array;L.default.findUniqueGIDInLayer(this.map,"platforms").forEach(function(b){a.map.createFromObjects("platforms",b.gid,"objects1",b.name,!0,!1,a.platformsGroup,t.default)}),this.platformsGroup.forEach(function(b){c.push(a.physics.p2.createMaterial("slipperyMaterial",b.body))},this),this.blockingGroup=this.add.group(),L.default.findUniqueGIDInLayer(this.map,"blockingobjects").forEach(function(b){a.map.createFromObjects("blockingobjects",b.gid,"objects1",b.name,!0,!1,a.blockingGroup,n.default)}),this.collectablesGroup=this.add.group(),L.default.findUniqueGIDInLayer(this.map,"collectables").forEach(function(b){a.map.createFromObjects("collectables",b.gid,"objects1",b.name,!0,!1,a.collectablesGroup,p.default)}),this.stalacitesGroup=this.add.group(),L.default.findUniqueGIDInLayer(this.map,"stalacites").forEach(function(b){a.map.createFromObjects("stalacites",b.gid,"objects2",b.name,!0,!1,a.stalacitesGroup,F.default)}),this.map.createFromObjects("door",176,"objects1","entrancedoor",!0,!1,this.world,l.default),this.entrancedoor=this.world.getTop(),this.player=new j.default(this.game,150,2850);var d=this.physics.p2.createMaterial("playerMaterial",this.player.body);this.physics.p2.createContactMaterial(d,c[0],{friction:.35,surfaceVelocity:1e3}),this.physics.p2.createContactMaterial(d,c[1],{friction:.35,surfaceVelocity:-1e3}),this.physics.p2.createContactMaterial(d,c[2],{friction:.35,surfaceVelocity:1e3}),this.physics.p2.createContactMaterial(d,c[3],{friction:.35,surfaceVelocity:-1e3}),this.physics.p2.createContactMaterial(d,c[4],{friction:.35,surfaceVelocity:-1e3}),this.add.existing(this.player),this.camera.follow(this.player),this.sound.stopAll(),this.sfx=this.add.audioSprite("sfx"),this.theme=this.add.audioSprite("theme"),L.default.getData("mutesound")&&L.default.muteOrPlay(this.sfx,!0),L.default.getData("mutetheme")&&L.default.muteOrPlay(this.theme,!0),this.player.sfx=this.sfx,this.ratGroup=this.add.group(),this.map.createFromObjects("ratgrunts",187,"ratgrunt","frame0",!0,!1,this.ratGroup,z.default),this.ratGroup.forEach(function(b){b.player=a.player,b.sfx=a.sfx},this),this.map.createFromObjects("ratsoldiers",191,"ratsoldier","hitframe0",!0,!1,this.ratGroup,B.default),this.ratGroup.forEach(function(b){b.player=a.player,b.sfx=a.sfx},this),this.catGroup=this.add.group(),this.map.createFromObjects("cats",194,"cat","frame0",!0,!1,this.catGroup,D.default),this.stopsGroup=this.add.group(),L.default.findUniqueGIDInLayer(this.map,"enemystops").forEach(function(b){a.map.createFromObjects("enemystops",b.gid,"objects1",b.name,!0,!1,a.stopsGroup,H.default)}),this.map.createLayer("decorative2"),this.healthBar=new v.default(this.game,20,20),this.energyBar=new x.default(this.game,31,80),this.player.energyBar=this.energyBar,this.player.healthBar=this.healthBar,this.cheeseScore=new N.default(this.game,460,20,15),this.physics.p2.setImpactEvents(!0);var e=this.physics.p2.createCollisionGroup(),f=this.physics.p2.createCollisionGroup(),g=this.physics.p2.createCollisionGroup(),h=this.physics.p2.createCollisionGroup(),i=this.physics.p2.createCollisionGroup(),k=this.physics.p2.createCollisionGroup(),m=this.physics.p2.createCollisionGroup(),o=this.physics.p2.createCollisionGroup(),q=this.physics.p2.createCollisionGroup(),s=this.physics.p2.createCollisionGroup(),u=this.physics.p2.createCollisionGroup(),w=this.physics.p2.createCollisionGroup(),y=this.physics.p2.createCollisionGroup();this.physics.p2.updateBoundsCollisionGroup();var A=this.physics.p2.createMaterial("tileMaterial");b.forEach(function(a){a.setMaterial(A),a.setCollisionGroup(e),a.collides([h,q,o,s,u,m])}),this.platformsGroup.forEach(function(a){a.body.setCollisionGroup(f),a.body.collides([h,q,s,u,m])},this),this.stalacitesGroup.forEach(function(b){b.body.setCollisionGroup(g),b.body.collides(h,a.enemyHitListener,a)},this),this.player.body.setCollisionGroup(h),this.player.body.collides([e,g,o,f,q,s,u,k,m,y],this.platformHitListener,this),this.player.hitbox1.body.setCollisionGroup(i),this.player.hitbox1.body.collides([s,u,m],this.playerHitListener,this),this.blockingGroup.forEach(function(a){a.body.setCollisionGroup(o),a.body.collides([h,q,s,e,u,m])},this),this.collectablesGroup.forEach(function(b){b.body.setCollisionGroup(q),b.body.collides([e,f,o]),b.body.collides(h,a.collectablesListener,a)},this),this.ratGroup.forEach(function(b){b.body.setCollisionGroup(s),b.body.collides([e,f,o,w,i]),b.body.collides(h,a.enemyHitListener,a),"ratsoldier"==b.key&&(b.hitbox1.body.setCollisionGroup(k),b.hitbox1.body.collides(h,a.enemyHitListener,a))},this);var C=this.physics.p2.createMaterial("ballMaterial");this.catGroup.forEach(function(b){b.body.setCollisionGroup(u),b.body.collides([e,f,o,w,i]),b.body.collides(h,a.enemyHitListener,a),b.balls.forEach(function(b){b.body.setMaterial(C),b.body.setCollisionGroup(m),b.body.collides([e,f,o,i]),b.body.collides(h,a.enemyHitListener,a)},b)},this),this.stopsGroup.forEach(function(a){a.body.setCollisionGroup(w),a.body.collides([s,u])},this),this.entrancedoor.body.setCollisionGroup(y),this.entrancedoor.body.collides(h,this.nextEpisode,this),this.physics.p2.createContactMaterial(A,C,{friction:.2,restitution:.8}),this.input.keyboard.addKeyCapture([Phaser.Keyboard.SPACE,Phaser.Keyboard.UP,Phaser.Keyboard.LEFT,Phaser.Keyboard.RIGHT]),this.naviKeys=this.input.keyboard.addKeys({up:Phaser.KeyCode.UP,down:Phaser.KeyCode.DOWN,enter:Phaser.KeyCode.ENTER,esc:Phaser.KeyCode.ESC}),this.naviKeys.esc.onDown.add(function(){a.game.paused?a.resumeGame():(a.game.paused=!0,a.popup=new J.default(a.game,a.camera.x,a.camera.y,2),a.world.addChild(a.popup))},this),this.naviKeys.up.onDown.add(function(b){a.game.paused&&a.popup.cursorMoved(b.keyCode)},this),this.naviKeys.down.onDown.add(function(b){a.game.paused&&a.popup.cursorMoved(b.keyCode)},this),this.naviKeys.enter.onDown.add(function(){a.game.paused&&a.processSelection()},this),this.game.onPause.add(function(){this.sound.unsetMute()},this),this.theme.sounds.Obliteration.play("Obliteration",null,.3,!0),this.titletext=new P.default(this.game,"Ep 3. The Flying Menace"),this.add.existing(this.titletext),this.time.advancedTiming=!0}},{key:"update",value:function(){(this.damageZone.intersectsRaw(this.player.left,this.player.right,this.player.top,this.player.bottom)||this.damageZone1.intersectsRaw(this.player.left,this.player.right,this.player.top,this.player.bottom))&&(L.default.playSound(this.sfx,["Footstep_Water_04","Footstep_Water_05","Footstep_Water_06"]),this.player.damagePlayer(4))}},{key:"nextEpisode",value:function(a,b){b.sprite&&"player"===b.sprite.key&&(this.cheeseScore.addToTotalScore(3),this.state.start("preload",!0,!1,"ep4"))}},{key:"resumeGame",value:function(){var a=this.world.getTop();"popup"===a.key&&(this.world.removeChild(a),a.destroy()),this.game.paused=!1}},{key:"processSelection",value:function(){var a=this.world.getTop().optionEntered();if(a)switch(a){case"Resume Game":this.resumeGame();break;case"Restart Episode":this.resumeGame(),this.state.start("ep3");break;case"Instructions":this.popupInstruction=new J.default(this.game,this.camera.x,this.camera.y,3);var b=this.cache.getJSON("config").popup.instructions;this.popupInstruction.setTitle(b.title),this.popupInstruction.setDescription(b.description,0),this.world.removeChild(this.popup),this.world.addChild(this.popupInstruction),this.enableCursorKeys(!1);break;case"Got it!":this.enableCursorKeys(!0),this.resumeGame();break;case"Quit to Main Menu":this.resumeGame(),this.state.start("menu");break;case"Mute Music":L.default.storeData("mutetheme",!0),L.default.muteOrPlay(this.theme,!0);break;case"Mute Sound":L.default.storeData("mutesound",!0),L.default.muteOrPlay(this.sfx,!0);break;case"Play Music":L.default.storeData("mutetheme",!1),L.default.muteOrPlay(this.theme,!1);break;case"Play Sound":L.default.storeData("mutesound",!1),L.default.muteOrPlay(this.sfx,!1)}}},{key:"enableCursorKeys",value:function(a){this.naviKeys.up.enabled=a,this.naviKeys.down.enabled=a}},{key:"platformHitListener",value:function(a,b,c,d){!b.sprite||"slippery1"!=b.sprite.frameName&&"slippery2"!=b.sprite.frameName?this.player.onslippyplatform&&(this.player.onslippyplatform=!1):(L.default.playSound(this.sfx,["slime7","slime8","slime9"]),this.player.onslippyplatform=!0)}},{key:"collectablesListener",value:function(a,b,c,d){if(b.sprite&&"player"===b.sprite.key){switch(a.sprite.frameName){case"cheese1":this.player.replenishEnergy(10),this.cheeseScore.increaseScore(2),this.sfx.play("Rise04");break;case"cheese2":case"cheese3":this.player.replenishEnergy(5),this.cheeseScore.increaseScore(1),this.sfx.play("Rise04");break;case"wineglass":case"martiniglass":this.player.replenishLife(10),this.sfx.play("Rise04");break;case"winebottle":this.player.replenishLife(20),this.sfx.play("Rise04")}this.player.flash("green"),a.sprite.destroy()}}},{key:"enemyHitListener",value:function(a,b,c,d){if(b.sprite&&"player"===b.sprite.key&&a.sprite)switch(a.sprite.key){case"ratgrunt":c===a.data.shapes[0]&&this.player.damagePlayer(5);break;case"ratsoldier":c===a.data.shapes[0]&&this.player.damagePlayer(8);break;case"cat":this.player.damagePlayer(8);break;case"objects3":this.player.damagePlayer(4);break;case"objects2":var e=a.sprite.frameName;(/^upper\d{1}/.test(e)||/^below\d{1}/.test(e))&&this.player.damagePlayer(4);break;case"objects1":"stop"==a.sprite.frameName&&this.player.damagePlayer(5,200)}}},{key:"playerHitListener",value:function(a,b,c,d){if(b.sprite)switch(b.sprite.key){case"ratgrunt":case"ratsoldier":b.sprite.damageRat(8,400);break;case"cat":
b.sprite.damageCat(8,400)}}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}}]),b}(Phaser.State);c.default=Q,b.exports=c.default},{"../components/Tools.js":2,"../prefabs/BlockingObjects.js":3,"../prefabs/Cat.js":4,"../prefabs/CheeseScore.js":6,"../prefabs/Collectables.js":7,"../prefabs/EnemyStops.js":8,"../prefabs/EnergyBar.js":9,"../prefabs/EntranceDoor.js":10,"../prefabs/HealthBar.js":11,"../prefabs/Platforms.js":12,"../prefabs/Player.js":13,"../prefabs/Popup.js":14,"../prefabs/RatGrunt.js":16,"../prefabs/RatSoldier.js":18,"../prefabs/Stalacites.js":20,"../prefabs/TitleText.js":21,"../prefabs/WavesObjects.js":22}],27:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("../prefabs/Player.js"),j=d(i),k=a("../prefabs/EntranceDoor.js"),l=d(k),m=a("../prefabs/BlockingObjects.js"),n=d(m),o=a("../prefabs/Collectables.js"),p=d(o),q=a("../prefabs/WavesObjects.js"),r=d(q),s=a("../prefabs/Platforms.js"),t=d(s),u=a("../prefabs/HealthBar.js"),v=d(u),w=a("../prefabs/EnergyBar.js"),x=d(w),y=a("../prefabs/RatGrunt.js"),z=d(y),A=a("../prefabs/RatSoldier.js"),B=d(A),C=a("../prefabs/Cat.js"),D=d(C),E=a("../prefabs/Stalacites.js"),F=d(E),G=a("../prefabs/EnemyStops.js"),H=d(G),I=a("../prefabs/Popup.js"),J=d(I),K=a("../components/Tools.js"),L=d(K),M=a("../prefabs/CheeseScore.js"),N=d(M),O=a("../prefabs/ShurikenHUD.js"),P=d(O),Q=a("../prefabs/TitleText.js"),R=d(Q),S=function(a){function b(){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this)}return f(b,a),g(b,[{key:"create",value:function(){var a=this;this.physics.startSystem(Phaser.Physics.P2JS),this.physics.p2.gravity.y=800,this.physics.p2.world.defaultContactMaterial.friction=.42,this.physics.p2.world.setGlobalStiffness(1e5),this.map=this.add.tilemap("ep4"),this.map.addTilesetImage("tile"),this.bg=this.map.createLayer("background"),this.bg.scrollFactorX=.7,this.bg.scrollFactorY=.7,this.layer=this.map.createLayer("tiles"),this.layer.resizeWorld(),this.map.setCollisionBetween(1,120,!0,this.layer);var b=this.physics.p2.convertTilemap(this.map,this.layer);this.map.createFromObjects("movingwaves",13,"objects1","watertile",!0,!1,this.world,r.default),this.damageZone=new Phaser.Rectangle(-20,3750,720,120),this.platformsGroup=this.add.group();var c=new Array;L.default.findUniqueGIDInLayer(this.map,"platforms").forEach(function(b){a.map.createFromObjects("platforms",b.gid,"objects1",b.name,!0,!1,a.platformsGroup,t.default)}),this.platformsGroup.forEach(function(b){c.push(a.physics.p2.createMaterial("slipperyMaterial",b.body))},this),this.blockingGroup=this.add.group(),L.default.findUniqueGIDInLayer(this.map,"blockingobjects").forEach(function(b){a.map.createFromObjects("blockingobjects",b.gid,"objects1",b.name,!0,!1,a.blockingGroup,n.default)}),this.collectablesGroup=this.add.group(),L.default.findUniqueGIDInLayer(this.map,"collectables").forEach(function(b){a.map.createFromObjects("collectables",b.gid,"objects1",b.name,!0,!1,a.collectablesGroup,p.default)}),this.map.createFromObjects("weapons",26,"objects4","shurikens",!0,!1,this.collectablesGroup,p.default),this.stalacitesGroup=this.add.group(),L.default.findUniqueGIDInLayer(this.map,"stalacites").forEach(function(b){a.map.createFromObjects("stalacites",b.gid,"objects2",b.name,!0,!1,a.stalacitesGroup,F.default)}),this.map.createFromObjects("door",5,"objects1","entrancedoor",!0,!1,this.world,l.default),this.entrancedoor=this.world.getTop(),this.map.createFromObjects("torii1",24,"objects2","torii1"),this.player=new j.default(this.game,2340,2860);var d=this.physics.p2.createMaterial("playerMaterial",this.player.body);this.physics.p2.createContactMaterial(d,c[0],{friction:.35,surfaceVelocity:1e3}),this.physics.p2.createContactMaterial(d,c[1],{friction:.35,surfaceVelocity:-1e3}),this.physics.p2.createContactMaterial(d,c[2],{friction:.35,surfaceVelocity:1e3}),this.physics.p2.createContactMaterial(d,c[3],{friction:.35,surfaceVelocity:-1e3}),this.add.existing(this.player),this.map.createFromObjects("torii2",25,"objects2","torii2"),this.camera.follow(this.player),this.sound.stopAll(),this.sfx=this.add.audioSprite("sfx"),this.theme=this.add.audioSprite("theme"),L.default.getData("mutesound")&&L.default.muteOrPlay(this.sfx,!0),L.default.getData("mutetheme")&&L.default.muteOrPlay(this.theme,!0),this.player.sfx=this.sfx,this.ratGroup=this.add.group(),this.map.createFromObjects("ratgrunts",16,"ratgrunt","frame0",!0,!1,this.ratGroup,z.default),this.ratGroup.forEach(function(b){b.player=a.player,b.sfx=a.sfx},this),this.map.createFromObjects("ratsoldiers",20,"ratsoldier","hitframe0",!0,!1,this.ratGroup,B.default),this.ratGroup.forEach(function(b){b.player=a.player,b.sfx=a.sfx},this),this.catGroup=this.add.group(),this.map.createFromObjects("cats",23,"cat","frame0",!0,!1,this.catGroup,D.default),this.stopsGroup=this.add.group(),L.default.findUniqueGIDInLayer(this.map,"enemystops").forEach(function(b){a.map.createFromObjects("enemystops",b.gid,"objects1",b.name,!0,!1,a.stopsGroup,H.default)}),this.map.createLayer("decorative2"),this.healthBar=new v.default(this.game,20,20),this.energyBar=new x.default(this.game,31,80),this.player.energyBar=this.energyBar,this.player.healthBar=this.healthBar,this.cheeseScore=new N.default(this.game,460,20,18),this.shurikenHUD=new P.default(this.game,870,25,18),this.player.shurikenHUD=this.shurikenHUD,this.physics.p2.setImpactEvents(!0);var e=this.physics.p2.createCollisionGroup(),f=this.physics.p2.createCollisionGroup(),g=this.physics.p2.createCollisionGroup(),h=this.physics.p2.createCollisionGroup(),i=this.physics.p2.createCollisionGroup(),k=this.physics.p2.createCollisionGroup(),m=this.physics.p2.createCollisionGroup(),o=this.physics.p2.createCollisionGroup(),q=this.physics.p2.createCollisionGroup(),s=this.physics.p2.createCollisionGroup(),u=this.physics.p2.createCollisionGroup(),w=this.physics.p2.createCollisionGroup(),y=this.physics.p2.createCollisionGroup(),A=this.physics.p2.createCollisionGroup();this.physics.p2.updateBoundsCollisionGroup();var C=this.physics.p2.createMaterial("tileMaterial");b.forEach(function(a){a.setMaterial(C),a.setCollisionGroup(e),a.collides([h,s,q,u,w,o])}),this.platformsGroup.forEach(function(a){a.body.setCollisionGroup(f),a.body.collides([h,s,u,w,o])},this),this.stalacitesGroup.forEach(function(b){b.body.setCollisionGroup(g),b.body.collides(h,a.enemyHitListener,a)},this),this.player.body.setCollisionGroup(h),this.player.body.collides([e,g,q,f,s,u,w,m,o,A],this.platformHitListener,this),this.player.hitbox1.body.setCollisionGroup(i),this.player.hitbox1.body.collides([u,w,o],this.playerHitListener,this),this.player.shurikens.forEach(function(b){b.body.setCollisionGroup(k),b.body.collides([u,w,o],a.playerHitListener,a)},this),this.blockingGroup.forEach(function(a){a.body.setCollisionGroup(q),a.body.collides([h,s,u,e,w,o])},this),this.collectablesGroup.forEach(function(b){b.body.setCollisionGroup(s),b.body.collides([e,f,q]),b.body.collides(h,a.collectablesListener,a)},this),this.ratGroup.forEach(function(b){b.body.setCollisionGroup(u),b.body.collides([e,f,q,y,i,k]),b.body.collides(h,a.enemyHitListener,a),"ratsoldier"==b.key&&(b.hitbox1.body.setCollisionGroup(m),b.hitbox1.body.collides(h,a.enemyHitListener,a))},this);var E=this.physics.p2.createMaterial("ballMaterial");this.catGroup.forEach(function(b){b.body.setCollisionGroup(w),b.body.collides([e,f,q,y,i,k]),b.body.collides(h,a.enemyHitListener,a),b.balls.forEach(function(b){b.body.setMaterial(E),b.body.setCollisionGroup(o),b.body.collides([e,f,q,i,k]),b.body.collides(h,a.enemyHitListener,a)},b)},this),this.stopsGroup.forEach(function(a){a.body.setCollisionGroup(y),a.body.collides([u,w])},this),this.entrancedoor.body.setCollisionGroup(A),this.entrancedoor.body.collides(h,this.nextEpisode,this),this.physics.p2.createContactMaterial(C,E,{friction:.2,restitution:.8}),this.input.keyboard.addKeyCapture([Phaser.Keyboard.SPACE,Phaser.Keyboard.UP,Phaser.Keyboard.LEFT,Phaser.Keyboard.RIGHT]),this.naviKeys=this.input.keyboard.addKeys({up:Phaser.KeyCode.UP,down:Phaser.KeyCode.DOWN,enter:Phaser.KeyCode.ENTER,esc:Phaser.KeyCode.ESC}),this.naviKeys.esc.onDown.add(function(){a.game.paused?a.resumeGame():(a.game.paused=!0,a.popup=new J.default(a.game,a.camera.x,a.camera.y,2),a.world.addChild(a.popup))},this),this.naviKeys.up.onDown.add(function(b){a.game.paused&&a.popup.cursorMoved(b.keyCode)},this),this.naviKeys.down.onDown.add(function(b){a.game.paused&&a.popup.cursorMoved(b.keyCode)},this),this.naviKeys.enter.onDown.add(function(){a.game.paused&&a.processSelection()},this),this.game.onPause.add(function(){this.sound.unsetMute()},this),this.theme.sounds["Hiding Your Reality"].play("Hiding Your Reality",null,.4,!0),this.titletext=new R.default(this.game,"Ep 4. The Shooting Stars"),this.add.existing(this.titletext),this.time.advancedTiming=!0,this.tipsmarker=[!1]}},{key:"update",value:function(){this.damageZone.intersectsRaw(this.player.left,this.player.right,this.player.top,this.player.bottom)&&(L.default.playSound(this.sfx,["Footstep_Water_04","Footstep_Water_05","Footstep_Water_06"]),this.player.damagePlayer(4))}},{key:"nextEpisode",value:function(a,b){b.sprite&&"player"===b.sprite.key&&(this.cheeseScore.addToTotalScore(4),this.state.start("preload",!0,!1,"ep5"))}},{key:"resumeGame",value:function(){var a=this.world.getTop();"popup"===a.key&&(this.world.removeChild(a),a.destroy()),this.game.paused=!1}},{key:"processSelection",value:function(){var a=this.world.getTop().optionEntered();if(a)switch(a){case"Resume Game":this.resumeGame();break;case"Restart Episode":this.resumeGame(),this.state.start("ep4");break;case"Instructions":this.popupInstruction=new J.default(this.game,this.camera.x,this.camera.y,3);var b=this.cache.getJSON("config").popup.instructions;this.popupInstruction.setTitle(b.title),this.popupInstruction.setDescription(b.description,0),this.world.removeChild(this.popup),this.world.addChild(this.popupInstruction),this.enableCursorKeys(!1);break;case"Got it!":this.enableCursorKeys(!0),this.resumeGame();break;case"Quit to Main Menu":this.resumeGame(),this.state.start("menu");break;case"Mute Music":L.default.storeData("mutetheme",!0),L.default.muteOrPlay(this.theme,!0);break;case"Mute Sound":L.default.storeData("mutesound",!0),L.default.muteOrPlay(this.sfx,!0);break;case"Play Music":L.default.storeData("mutetheme",!1),L.default.muteOrPlay(this.theme,!1);break;case"Play Sound":L.default.storeData("mutesound",!1),L.default.muteOrPlay(this.sfx,!1)}}},{key:"enableCursorKeys",value:function(a){this.naviKeys.up.enabled=a,this.naviKeys.down.enabled=a}},{key:"platformHitListener",value:function(a,b,c,d){!b.sprite||"slippery1"!=b.sprite.frameName&&"slippery2"!=b.sprite.frameName?this.player.onslippyplatform&&(this.player.onslippyplatform=!1):(L.default.playSound(this.sfx,["slime7","slime8","slime9"]),this.player.onslippyplatform=!0)}},{key:"collectablesListener",value:function(a,b,c,d){if(b.sprite&&"player"===b.sprite.key){switch(a.sprite.frameName){case"cheese1":this.player.replenishEnergy(10),this.cheeseScore.increaseScore(2),this.sfx.play("Rise04");break;case"cheese2":case"cheese3":this.player.replenishEnergy(5),this.cheeseScore.increaseScore(1),this.sfx.play("Rise04");break;case"wineglass":case"martiniglass":this.player.replenishLife(10),this.sfx.play("Rise04");break;case"winebottle":this.player.replenishLife(20),this.sfx.play("Rise04");break;case"shurikens":this.tipsmarker[0]||(this.player.throwBody(),this.tipspopper(0)),this.player.increaseShuriken(5),this.sfx.play("Rise04")}this.player.flash("green"),a.sprite.destroy()}}},{key:"tipspopper",value:function(a){if(this.tipsmarker[a])return!1;this.sfx.play("collectsword"),this.game.paused=!0;var b=new J.default(this.game,this.camera.x,this.camera.y,3),c=this.cache.getJSON("config").popup.ep4.tips[a];return b.setTitle(c.title),c.description&&b.setDescription(c.description,0),this.tipsmarker[a]=!0,this.world.addChild(b),this.enableCursorKeys(!1),!0}},{key:"enemyHitListener",value:function(a,b,c,d){if(b.sprite&&"player"===b.sprite.key&&a.sprite)switch(a.sprite.key){case"ratgrunt":c===a.data.shapes[0]&&this.player.damagePlayer(5);break;case"ratsoldier":c===a.data.shapes[0]&&this.player.damagePlayer(8);break;case"cat":this.player.damagePlayer(8);break;case"objects3":this.player.damagePlayer(4);break;case"objects2":var e=a.sprite.frameName;(/^upper\d{1}/.test(e)||/^below\d{1}/.test(e))&&this.player.damagePlayer(4);break;case"objects1":"stop"==a.sprite.frameName&&this.player.damagePlayer(5,200)}}},{key:"playerHitListener",value:function(a,b,c,d){if(b.sprite)if(a.sprite&&/^s\d{1}/.test(a.sprite.frameName)){switch(b.sprite.key){case"ratgrunt":case"ratsoldier":b.sprite.damageRat(6,400);break;case"cat":b.sprite.damageCat(6,400)}a.sprite.kill()}else switch(b.sprite.key){case"ratgrunt":case"ratsoldier":b.sprite.damageRat(8,400);break;case"cat":b.sprite.damageCat(8,400)}}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}}]),b}(Phaser.State);c.default=S,b.exports=c.default},{"../components/Tools.js":2,"../prefabs/BlockingObjects.js":3,"../prefabs/Cat.js":4,"../prefabs/CheeseScore.js":6,"../prefabs/Collectables.js":7,"../prefabs/EnemyStops.js":8,"../prefabs/EnergyBar.js":9,"../prefabs/EntranceDoor.js":10,"../prefabs/HealthBar.js":11,"../prefabs/Platforms.js":12,"../prefabs/Player.js":13,"../prefabs/Popup.js":14,"../prefabs/RatGrunt.js":16,"../prefabs/RatSoldier.js":18,"../prefabs/ShurikenHUD.js":19,"../prefabs/Stalacites.js":20,"../prefabs/TitleText.js":21,"../prefabs/WavesObjects.js":22}],28:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("../prefabs/Player.js"),j=d(i),k=a("../prefabs/EntranceDoor.js"),l=d(k),m=a("../prefabs/BlockingObjects.js"),n=d(m),o=a("../prefabs/Collectables.js"),p=d(o),q=a("../prefabs/WavesObjects.js"),r=d(q),s=a("../prefabs/Platforms.js"),t=d(s),u=a("../prefabs/HealthBar.js"),v=d(u),w=a("../prefabs/EnergyBar.js"),x=d(w),y=a("../prefabs/RatGrunt.js"),z=d(y),A=a("../prefabs/RatSoldier.js"),B=d(A),C=a("../prefabs/RatNinja.js"),D=d(C),E=a("../prefabs/Cat.js"),F=d(E),G=a("../prefabs/Stalacites.js"),H=d(G),I=a("../prefabs/EnemyStops.js"),J=d(I),K=a("../prefabs/Popup.js"),L=d(K),M=a("../components/Tools.js"),N=d(M),O=a("../prefabs/CheeseScore.js"),P=d(O),Q=a("../prefabs/ShurikenHUD.js"),R=d(Q),S=a("../prefabs/TitleText.js"),T=d(S),U=function(a){function b(){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this)}return f(b,a),g(b,[{key:"create",value:function(){var a=this;this.physics.startSystem(Phaser.Physics.P2JS),this.physics.p2.gravity.y=800,this.physics.p2.world.defaultContactMaterial.friction=.42,this.physics.p2.world.setGlobalStiffness(1e5),this.map=this.add.tilemap("ep5"),this.map.addTilesetImage("tile"),this.bg=this.map.createLayer("background"),this.bg.scrollFactorX=.7,this.bg.scrollFactorY=.7,this.layer=this.map.createLayer("tiles"),this.layer.resizeWorld(),this.map.setCollisionBetween(1,120,!0,this.layer);var b=this.physics.p2.convertTilemap(this.map,this.layer);this.map.createFromObjects("movingwaves",184,"objects1","watertile",!0,!1,this.world,r.default),this.damageZone=new Phaser.Rectangle(0,3340,390,120),this.platformsGroup=this.add.group();var c=new Array;N.default.findUniqueGIDInLayer(this.map,"platforms").forEach(function(b){a.map.createFromObjects("platforms",b.gid,"objects1",b.name,!0,!1,a.platformsGroup,t.default)}),this.platformsGroup.forEach(function(b){c.push(a.physics.p2.createMaterial("slipperyMaterial",b.body))},this),this.blockingGroup=this.add.group(),N.default.findUniqueGIDInLayer(this.map,"blockingobjects").forEach(function(b){a.map.createFromObjects("blockingobjects",b.gid,"objects1",b.name,!0,!1,a.blockingGroup,n.default)}),this.collectablesGroup=this.add.group(),N.default.findUniqueGIDInLayer(this.map,"collectables").forEach(function(b){a.map.createFromObjects("collectables",b.gid,"objects1",b.name,!0,!1,a.collectablesGroup,p.default)}),this.map.createFromObjects("weapons",196,"objects4","shurikens",!0,!1,this.collectablesGroup,p.default),this.stalacitesGroup=this.add.group(),N.default.findUniqueGIDInLayer(this.map,"stalacites").forEach(function(b){a.map.createFromObjects("stalacites",b.gid,"objects2",b.name,!0,!1,a.stalacitesGroup,H.default)}),this.map.createFromObjects("door",176,"objects1","entrancedoor",!0,!1,this.world,l.default),this.entrancedoor=this.world.getTop(),this.player=new j.default(this.game,1780,1950);var d=this.physics.p2.createMaterial("playerMaterial",this.player.body);this.physics.p2.createContactMaterial(d,c[0],{friction:.35,surfaceVelocity:-1e3}),this.physics.p2.createContactMaterial(d,c[1],{friction:.35,surfaceVelocity:-1e3}),this.physics.p2.createContactMaterial(d,c[2],{friction:.35,surfaceVelocity:-1e3}),this.add.existing(this.player),this.camera.follow(this.player),this.sound.stopAll(),this.sfx=this.add.audioSprite("sfx"),this.theme=this.add.audioSprite("theme"),N.default.getData("mutesound")&&N.default.muteOrPlay(this.sfx,!0),N.default.getData("mutetheme")&&N.default.muteOrPlay(this.theme,!0),this.player.sfx=this.sfx,this.ratGroup=this.add.group(),this.map.createFromObjects("ratgrunts",187,"ratgrunt","frame0",!0,!1,this.ratGroup,z.default),this.ratGroup.forEach(function(b){b.player=a.player,b.sfx=a.sfx},this),this.map.createFromObjects("ratsoldiers",191,"ratsoldier","hitframe0",!0,!1,this.ratGroup,B.default),this.ratGroup.forEach(function(b){b.player=a.player,b.sfx=a.sfx},this),this.map.createFromObjects("ratninjas",195,"ratninja","throwframe1",!0,!1,this.ratGroup,D.default),this.ratGroup.forEach(function(b){b.player=a.player},this),this.catGroup=this.add.group(),this.map.createFromObjects("cats",194,"cat","frame0",!0,!1,this.catGroup,F.default),this.stopsGroup=this.add.group(),N.default.findUniqueGIDInLayer(this.map,"enemystops").forEach(function(b){a.map.createFromObjects("enemystops",b.gid,"objects1",b.name,!0,!1,a.stopsGroup,J.default)}),this.map.createLayer("decorative2"),this.healthBar=new v.default(this.game,20,20),this.energyBar=new x.default(this.game,31,80),this.player.energyBar=this.energyBar,this.player.healthBar=this.healthBar,this.cheeseScore=new P.default(this.game,460,20,19),this.shurikenHUD=new R.default(this.game,870,25,18),this.player.shurikenHUD=this.shurikenHUD,this.physics.p2.setImpactEvents(!0);var e=this.physics.p2.createCollisionGroup(),f=this.physics.p2.createCollisionGroup(),g=this.physics.p2.createCollisionGroup(),h=this.physics.p2.createCollisionGroup(),i=this.physics.p2.createCollisionGroup(),k=this.physics.p2.createCollisionGroup(),m=this.physics.p2.createCollisionGroup(),o=this.physics.p2.createCollisionGroup(),q=this.physics.p2.createCollisionGroup(),s=this.physics.p2.createCollisionGroup(),u=this.physics.p2.createCollisionGroup(),w=this.physics.p2.createCollisionGroup(),y=this.physics.p2.createCollisionGroup(),A=this.physics.p2.createCollisionGroup(),C=this.physics.p2.createCollisionGroup();this.physics.p2.updateBoundsCollisionGroup();var E=this.physics.p2.createMaterial("tileMaterial");b.forEach(function(a){a.setMaterial(E),a.setCollisionGroup(e),a.collides([h,u,s,w,y,q])}),this.platformsGroup.forEach(function(a){a.body.setCollisionGroup(f),a.body.collides([h,u,w,y,q])},this),this.stalacitesGroup.forEach(function(b){b.body.setCollisionGroup(g),b.body.collides(h,a.enemyHitListener,a)},this),this.player.body.setCollisionGroup(h),this.player.body.collides([e,g,s,f,u,w,y,m,o,q,C],this.platformHitListener,this),this.player.hitbox1.body.setCollisionGroup(i),this.player.hitbox1.body.collides([w,y,q,o],this.playerHitListener,this),this.player.shurikens.forEach(function(b){b.body.setCollisionGroup(k),b.body.collides([w,y,q,o],a.playerHitListener,a)},this),this.blockingGroup.forEach(function(a){a.body.setCollisionGroup(s),a.body.collides([h,u,w,e,y,q])},this),this.collectablesGroup.forEach(function(b){b.body.setCollisionGroup(u),b.body.collides([e,f,s]),b.body.collides(h,a.collectablesListener,a)},this),this.ratGroup.forEach(function(b){b.body.setCollisionGroup(w),b.body.collides([e,f,s,A,i,k]),b.body.collides(h,a.enemyHitListener,a),"ratsoldier"==b.key&&(b.hitbox1.body.setCollisionGroup(m),b.hitbox1.body.collides(h,a.enemyHitListener,a)),"ratninja"==b.key&&b.shurikens.forEach(function(b){b.body.setCollisionGroup(o),b.body.collides([i,k]),b.body.collides(h,a.enemyHitListener,a)},a)},this);var G=this.physics.p2.createMaterial("ballMaterial");this.catGroup.forEach(function(b){b.body.setCollisionGroup(y),b.body.collides([e,f,s,A,i,k]),b.body.collides(h,a.enemyHitListener,a),b.balls.forEach(function(b){b.body.setMaterial(G),b.body.setCollisionGroup(q),b.body.collides([e,f,s,i,k]),b.body.collides(h,a.enemyHitListener,a)},b)},this),this.stopsGroup.forEach(function(a){a.body.setCollisionGroup(A),a.body.collides([w,y])},this),this.entrancedoor.body.setCollisionGroup(C),this.entrancedoor.body.collides(h,this.nextEpisode,this),this.physics.p2.createContactMaterial(E,G,{friction:.2,restitution:.8}),this.input.keyboard.addKeyCapture([Phaser.Keyboard.SPACE,Phaser.Keyboard.UP,Phaser.Keyboard.LEFT,Phaser.Keyboard.RIGHT]),this.naviKeys=this.input.keyboard.addKeys({up:Phaser.KeyCode.UP,down:Phaser.KeyCode.DOWN,enter:Phaser.KeyCode.ENTER,esc:Phaser.KeyCode.ESC}),this.naviKeys.esc.onDown.add(function(){a.game.paused?a.resumeGame():(a.game.paused=!0,a.popup=new L.default(a.game,a.camera.x,a.camera.y,2),a.world.addChild(a.popup))},this),this.naviKeys.up.onDown.add(function(b){a.game.paused&&a.popup.cursorMoved(b.keyCode)},this),this.naviKeys.down.onDown.add(function(b){a.game.paused&&a.popup.cursorMoved(b.keyCode)},this),this.naviKeys.enter.onDown.add(function(){a.game.paused&&a.processSelection()},this),this.game.onPause.add(function(){this.sound.unsetMute()},this),this.theme.sounds.Obliteration.play("Obliteration",null,.3,!0),this.titletext=new T.default(this.game,"Ep 5. The Ninja Reality"),this.add.existing(this.titletext),this.time.advancedTiming=!0}},{key:"update",value:function(){this.damageZone.intersectsRaw(this.player.left,this.player.right,this.player.top,this.player.bottom)&&(N.default.playSound(this.sfx,["Footstep_Water_04","Footstep_Water_05","Footstep_Water_06"]),this.player.damagePlayer(4))}},{key:"nextEpisode",value:function(a,b){b.sprite&&"player"===b.sprite.key&&(this.cheeseScore.addToTotalScore(5),this.state.start("preload",!0,!1,"ep6"))}},{key:"resumeGame",value:function(){var a=this.world.getTop();"popup"===a.key&&(this.world.removeChild(a),a.destroy()),this.game.paused=!1}},{key:"processSelection",value:function(){var a=this.world.getTop().optionEntered();if(a)switch(a){case"Resume Game":this.resumeGame();break;case"Restart Episode":this.resumeGame(),this.state.start("ep5");break;case"Instructions":this.popupInstruction=new L.default(this.game,this.camera.x,this.camera.y,3);var b=this.cache.getJSON("config").popup.instructions;this.popupInstruction.setTitle(b.title),this.popupInstruction.setDescription(b.description,0),this.world.removeChild(this.popup),this.world.addChild(this.popupInstruction),this.enableCursorKeys(!1);break;case"Got it!":this.enableCursorKeys(!0),this.resumeGame();break;case"Quit to Main Menu":this.resumeGame(),this.state.start("menu");break;case"Mute Music":N.default.storeData("mutetheme",!0),N.default.muteOrPlay(this.theme,!0);break;case"Mute Sound":N.default.storeData("mutesound",!0),N.default.muteOrPlay(this.sfx,!0);break;case"Play Music":N.default.storeData("mutetheme",!1),N.default.muteOrPlay(this.theme,!1);break;case"Play Sound":N.default.storeData("mutesound",!1),N.default.muteOrPlay(this.sfx,!1)}}},{key:"enableCursorKeys",value:function(a){this.naviKeys.up.enabled=a,this.naviKeys.down.enabled=a}},{key:"platformHitListener",value:function(a,b,c,d){!b.sprite||"slippery1"!=b.sprite.frameName&&"slippery2"!=b.sprite.frameName?this.player.onslippyplatform&&(this.player.onslippyplatform=!1):(N.default.playSound(this.sfx,["slime7","slime8","slime9"]),this.player.onslippyplatform=!0)}},{key:"collectablesListener",value:function(a,b,c,d){if(b.sprite&&"player"===b.sprite.key){switch(a.sprite.frameName){case"cheese1":this.player.replenishEnergy(10),this.cheeseScore.increaseScore(2),this.sfx.play("Rise04");break;case"cheese2":case"cheese3":this.player.replenishEnergy(5),this.cheeseScore.increaseScore(1),this.sfx.play("Rise04");break;case"wineglass":case"martiniglass":this.player.replenishLife(10),this.sfx.play("Rise04");break;case"winebottle":this.player.replenishLife(20),this.sfx.play("Rise04");break;case"shurikens":this.player.throwEnabled||this.player.throwBody(),this.player.increaseShuriken(5),this.sfx.play("Rise04")}this.player.flash("green"),a.sprite.destroy()}}},{key:"enemyHitListener",value:function(a,b,c,d){if(b.sprite&&"player"===b.sprite.key&&a.sprite)switch(a.sprite.key){case"ratgrunt":c===a.data.shapes[0]&&this.player.damagePlayer(5);break;case"ratsoldier":case"ratninja":/^s\d{1}/.test(a.sprite.frameName)?(this.player.damagePlayer(5,200),a.sprite.kill()):c===a.data.shapes[0]&&this.player.damagePlayer(8);break;case"cat":this.player.damagePlayer(8);break;case"objects3":this.player.damagePlayer(4);break;case"objects2":var e=a.sprite.frameName;(/^upper\d{1}/.test(e)||/^below\d{1}/.test(e))&&this.player.damagePlayer(4);break;case"objects1":"stop"==a.sprite.frameName&&this.player.damagePlayer(5,200)}}},{key:"playerHitListener",value:function(a,b,c,d){if(b.sprite)if(a.sprite&&/^s\d{1}/.test(a.sprite.frameName)){switch(b.sprite.key){case"ratgrunt":case"ratsoldier":case"ratninja":b.sprite.damageRat(6,400);break;case"cat":b.sprite.damageCat(6,400)}a.sprite.kill()}else switch(b.sprite.key){case"ratgrunt":case"ratsoldier":case"ratninja":b.sprite.damageRat(8,400);break;case"cat":b.sprite.damageCat(8,400)}}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}}]),b}(Phaser.State);c.default=U,b.exports=c.default},{"../components/Tools.js":2,"../prefabs/BlockingObjects.js":3,"../prefabs/Cat.js":4,"../prefabs/CheeseScore.js":6,"../prefabs/Collectables.js":7,"../prefabs/EnemyStops.js":8,"../prefabs/EnergyBar.js":9,"../prefabs/EntranceDoor.js":10,"../prefabs/HealthBar.js":11,"../prefabs/Platforms.js":12,"../prefabs/Player.js":13,"../prefabs/Popup.js":14,"../prefabs/RatGrunt.js":16,"../prefabs/RatNinja.js":17,"../prefabs/RatSoldier.js":18,"../prefabs/ShurikenHUD.js":19,"../prefabs/Stalacites.js":20,"../prefabs/TitleText.js":21,"../prefabs/WavesObjects.js":22}],29:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("../prefabs/Player.js"),j=d(i),k=a("../prefabs/EntranceDoor.js"),l=d(k),m=a("../prefabs/BlockingObjects.js"),n=d(m),o=a("../prefabs/Collectables.js"),p=d(o),q=a("../prefabs/WavesObjects.js"),r=(d(q),a("../prefabs/Platforms.js")),s=d(r),t=a("../prefabs/HealthBar.js"),u=d(t),v=a("../prefabs/EnergyBar.js"),w=d(v),x=a("../prefabs/RatSoldier.js"),y=d(x),z=a("../prefabs/RatNinja.js"),A=d(z),B=a("../prefabs/RatBoss.js"),C=d(B),D=a("../prefabs/CatFinale.js"),E=d(D),F=a("../prefabs/Stalacites.js"),G=d(F),H=a("../prefabs/EnemyStops.js"),I=d(H),J=a("../prefabs/Popup.js"),K=d(J),L=a("../components/Tools.js"),M=d(L),N=a("../prefabs/CheeseScore.js"),O=d(N),P=a("../prefabs/ShurikenHUD.js"),Q=d(P),R=a("../prefabs/TitleText.js"),S=d(R),T=function(a){function b(){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this)}return f(b,a),g(b,[{key:"create",value:function(){var a=this;this.physics.startSystem(Phaser.Physics.P2JS),this.physics.p2.gravity.y=800,this.physics.p2.world.defaultContactMaterial.friction=.42,this.physics.p2.world.setGlobalStiffness(1e5),this.map=this.add.tilemap("ep6"),this.map.addTilesetImage("tile"),this.bg=this.map.createLayer("background"),this.bg.scrollFactorX=.7,this.bg.scrollFactorY=.7,this.layer=this.map.createLayer("tiles"),this.layer.resizeWorld(),this.map.setCollisionBetween(1,122,!0,this.layer);var b=this.physics.p2.convertTilemap(this.map,this.layer);this.platformsGroup=this.add.group();var c=new Array;M.default.findUniqueGIDInLayer(this.map,"platforms").forEach(function(b){a.map.createFromObjects("platforms",b.gid,"objects1",b.name,!0,!1,a.platformsGroup,s.default)}),this.platformsGroup.forEach(function(b){c.push(a.physics.p2.createMaterial("slipperyMaterial",b.body))},this),this.blockingGroup=this.add.group(),M.default.findUniqueGIDInLayer(this.map,"blockingobjects").forEach(function(b){a.map.createFromObjects("blockingobjects",b.gid,"objects1",b.name,!0,!1,a.blockingGroup,n.default)}),this.map.createFromObjects("largerock",27,"objects5","largerock",!0,!1,this.blockingGroup,n.default),this.largerock=this.blockingGroup.getTop(),this.map.createFromObjects("door",5,"objects1","entrancedoor",!0,!1,this.world,l.default),this.entrancedoor=this.world.getTop(),this.entrancedoor.kill(),this.collectablesGroup=this.add.group(),M.default.findUniqueGIDInLayer(this.map,"collectables").forEach(function(b){a.map.createFromObjects("collectables",b.gid,"objects1",b.name,!0,!1,a.collectablesGroup,p.default)}),
this.map.createFromObjects("cheesepule",26,"objects5","cheesepule",!0,!1,this.collectablesGroup,p.default),this.map.createFromObjects("weapons",29,"objects4","shurikens",!0,!1,this.collectablesGroup,p.default),this.stalacitesGroup=this.add.group(),M.default.findUniqueGIDInLayer(this.map,"stalacites").forEach(function(b){a.map.createFromObjects("stalacites",b.gid,"objects2",b.name,!0,!1,a.stalacitesGroup,G.default)}),this.player=new j.default(this.game,60,1575);var d=this.physics.p2.createMaterial("playerMaterial",this.player.body);this.add.existing(this.player),this.camera.follow(this.player,Phaser.Camera.FOLLOW_PLATFORMER),this.sound.stopAll(),this.sfx=this.add.audioSprite("sfx"),this.theme=this.add.audioSprite("boss"),M.default.getData("mutesound")&&M.default.muteOrPlay(this.sfx,!0),M.default.getData("mutetheme")&&M.default.muteOrPlay(this.theme,!0),this.player.sfx=this.sfx,this.ratGroup=this.add.group(this.world,"rats"),this.map.createFromObjects("ratsoldiers",20,"ratsoldier","hitframe0",!0,!1,this.ratGroup,y.default),this.ratGroup.setAll("paused",!0),this.map.createFromObjects("ratninjas",28,"ratninja","throwframe1",!0,!1,this.ratGroup,A.default),this.map.createFromObjects("ratboss",24,"ratboss","bodyf1",!0,!1,this.ratGroup,C.default),this.ratGroup.forEach(function(b){b.player=a.player,b.sfx=a.sfx},this);var e=this.ratGroup.getTop(),f=e.rightarm,g=this.physics.p2.createMaterial("ratbossmaterial",e.body),h=this.physics.p2.createMaterial("armmaterial",f.body);this.physics.p2.createContactMaterial(d,h,{friction:.35,restitution:.8}),this.physics.p2.createContactMaterial(d,g,{friction:.35,restitution:.8}),this.physics.p2.createContactMaterial(d,c[0],{friction:.35,surfaceVelocity:-1e3}),this.physics.p2.createContactMaterial(d,c[1],{friction:.35,surfaceVelocity:1e3}),this.physics.p2.createContactMaterial(d,c[2],{friction:.35,surfaceVelocity:1e3}),this.physics.p2.createContactMaterial(d,c[3],{friction:.35,surfaceVelocity:1e3}),this.world.bringToTop(this.ratGroup),this.stopsGroup=this.add.group(),M.default.findUniqueGIDInLayer(this.map,"enemystops").forEach(function(b){a.map.createFromObjects("enemystops",b.gid,"objects1",b.name,!0,!1,a.stopsGroup,I.default)}),this.healthBar=new u.default(this.game,20,20),this.energyBar=new w.default(this.game,31,80),this.player.energyBar=this.energyBar,this.player.healthBar=this.healthBar,this.cheeseScore=new O.default(this.game,460,20,109),this.shurikenHUD=new Q.default(this.game,870,25,18),this.player.shurikenHUD=this.shurikenHUD,this.physics.p2.setImpactEvents(!0);var i=this.physics.p2.createCollisionGroup(),k=this.physics.p2.createCollisionGroup(),m=this.physics.p2.createCollisionGroup(),o=this.physics.p2.createCollisionGroup(),q=this.physics.p2.createCollisionGroup(),r=this.physics.p2.createCollisionGroup(),t=this.physics.p2.createCollisionGroup(),v=this.physics.p2.createCollisionGroup(),x=this.physics.p2.createCollisionGroup(),z=this.physics.p2.createCollisionGroup(),B=this.physics.p2.createCollisionGroup(),D=this.physics.p2.createCollisionGroup();this.catCG=this.physics.p2.createCollisionGroup(),this.entrancedoorCG=this.physics.p2.createCollisionGroup();var E=this.physics.p2.createCollisionGroup();this.physics.p2.updateBoundsCollisionGroup(),b.forEach(function(a){a.setCollisionGroup(i),a.collides([o,z,x,B])}),this.platformsGroup.forEach(function(a){a.body.setCollisionGroup(k),a.body.collides([o,z,B])},this),this.stalacitesGroup.forEach(function(b){b.body.setCollisionGroup(m),b.body.collides(o,a.enemyHitListener,a)},this),this.player.body.setCollisionGroup(o),this.player.body.collides([i,m,x,k,z,B,t,E,v],this.platformHitListener,this),this.player.hitbox1.body.setCollisionGroup(q),this.player.hitbox1.body.collides([B,v],this.playerHitListener,this),this.player.shurikens.forEach(function(b){b.body.setCollisionGroup(r),b.body.collides([v,E]),b.body.collides(B,a.playerHitListener,a)},this),this.blockingGroup.forEach(function(a){a.body.setCollisionGroup(x),a.body.collides([o,z,B,i])},this),this.collectablesGroup.forEach(function(b){b.body.setCollisionGroup(z),b.body.collides([i,k,x]),b.body.collides(o,a.collectablesListener,a)},this),this.ratGroup.forEach(function(b){b.body.setCollisionGroup(B),b.body.collides([i,k,x,D,q,r]),b.body.collides(o,a.enemyHitListener,a),"ratsoldier"==b.key&&(b.hitbox1.body.setCollisionGroup(t),b.hitbox1.body.collides(o,a.enemyHitListener,a)),"ratninja"==b.key&&b.shurikens.forEach(function(b){b.body.setCollisionGroup(v),b.body.collides([q,r]),b.body.collides(o,a.enemyHitListener,a)},a)},this),f.body.setCollisionGroup(E),f.body.collides([o,r]),f.body.onBeginContact.add(this.playerArmed,this),this.stopsGroup.forEach(function(a){a.body.setCollisionGroup(D),a.body.collides([B])},this),this.entrancedoor.body.setCollisionGroup(this.entrancedoorCG),this.entrancedoor.body.collides(this.catCG,this.finalEpisode,this),this.input.keyboard.addKeyCapture([Phaser.Keyboard.SPACE,Phaser.Keyboard.UP,Phaser.Keyboard.LEFT,Phaser.Keyboard.RIGHT]),this.naviKeys=this.input.keyboard.addKeys({up:Phaser.KeyCode.UP,down:Phaser.KeyCode.DOWN,enter:Phaser.KeyCode.ENTER,esc:Phaser.KeyCode.ESC}),this.naviKeys.esc.onDown.add(function(){a.game.paused?a.resumeGame():(a.game.paused=!0,a.popup=new K.default(a.game,a.camera.x,a.camera.y,2),a.world.addChild(a.popup))},this),this.naviKeys.up.onDown.add(function(b){a.game.paused&&a.popup.cursorMoved(b.keyCode)},this),this.naviKeys.down.onDown.add(function(b){a.game.paused&&a.popup.cursorMoved(b.keyCode)},this),this.naviKeys.enter.onDown.add(function(){a.game.paused&&a.processSelection()},this),this.game.onPause.add(function(){this.sound.unsetMute()},this),this.theme.sounds["Improv for Evil"].play("Improv for Evil",null,.4,!0),this.titletext=new S.default(this.game,"Ep 6. The O'Mighty Claw"),this.add.existing(this.titletext),this.time.advancedTiming=!0,this.scenesmarker=[!1,!1,!1,!1],this.cameratimer=0,this.scenecounter=0}},{key:"addCat",value:function(){this.catfinale||(this.catGroup=this.add.group(this.world,"cats"),this.map.createFromObjects("cats",23,"catfinale","catf1",!0,!1,this.catGroup,E.default),this.catfinale=this.catGroup.getTop(),this.catfinale.body.setCollisionGroup(this.catCG),this.catfinale.body.collides(this.entrancedoorCG))}},{key:"update",value:function(){if(this.player.x>=250&&!this.scenesmarker[0]&&(this.player.paused=!0,this.game.time.now>this.cameratimer)){switch(this.scenecounter++){case 0:this.camera.follow(this.ratGroup.getChildAt(3),null,.02,.02);break;case 1:this.camera.follow(this.ratGroup.getChildAt(6),null,.03,.03);break;case 2:this.camera.follow(this.ratGroup.getChildAt(5),null,.03,.03);break;case 3:var a=this.ratGroup.getTop();this.camera.follow(a,null,.01,.01),a.startscene=!0,this.scenesmarker[0]=!0}this.cameratimer=this.game.time.now+4e3}var b=this.ratGroup.getTop();if(this.player.paused&&this.scenesmarker[0]&&b.alive&&!b.startscene&&(this.camera.follow(this.player,Phaser.Camera.FOLLOW_PLATFORMER),this.ratGroup.setAll("paused",!1),this.player.paused=!1,this.ratGroup.getTop().attack=!0),b.alive||this.scenesmarker[1]||(this.largerock.destroy(),this.scenecounter=0,this.scenesmarker[1]=!0),this.scenesmarker[1]&&this.scenesmarker[2]&&!this.scenesmarker[3]&&this.game.time.now>this.cameratimer){switch(this.scenecounter++){case 0:this.player.say("Yes! We've got the lost cheese! Let's go home!");break;case 1:this.player.paused=!0,this.ratGroup.setAll("paused",!0),this.entrancedoor.revive(),this.addCat(),this.camera.follow(this.catfinale,null,.02,.02);break;case 2:this.catfinale.say("Dossier! Save me! Don't let him take me away!!");break;case 3:this.camera.follow(this.entrancedoor,null,.02,.02);break;case 4:this.camera.follow(this.player,Phaser.Camera.FOLLOW_PLATFORMER),this.player.paused=!1,this.ratGroup.setAll("paused",!1),this.catfinale.paused=!1,this.scenecounter=0,this.scenesmarker[3]=!0}this.cameratimer=this.game.time.now+4e3}if(this.scenesmarker[3]){var c=6500;if(this.game.time.now>this.cameratimer){switch(this.scenecounter++){case 1:this.player.paused=!0,this.ratGroup.setAll("paused",!0),this.camera.follow(this.catfinale,null,.02,.02);break;case 2:this.camera.follow(this.player,Phaser.Camera.FOLLOW_PLATFORMER),this.player.paused=!1,c=900;break;case 3:this.player.say("Marina! Noooooo~!!"),c=3e3;break;case 4:this.camera.fade(0,3500),c=4500;break;case 5:this.state.start("preload",!0,!1,"won")}this.cameratimer=this.game.time.now+c}}}},{key:"finalEpisode",value:function(a,b){b.sprite&&"catfinale"===b.sprite.key&&(this.cheeseScore.addToTotalScore(6),this.catfinale.fadeout())}},{key:"resumeGame",value:function(){var a=this.world.getTop();"popup"===a.key&&(this.world.removeChild(a),a.destroy()),this.game.paused=!1}},{key:"processSelection",value:function(){var a=this.world.getTop().optionEntered();if(a)switch(a){case"Resume Game":this.resumeGame();break;case"Restart Episode":this.resumeGame(),this.state.start("ep6");break;case"Instructions":this.popupInstruction=new K.default(this.game,this.camera.x,this.camera.y,3);var b=this.cache.getJSON("config").popup.instructions;this.popupInstruction.setTitle(b.title),this.popupInstruction.setDescription(b.description,0),this.world.removeChild(this.popup),this.world.addChild(this.popupInstruction),this.enableCursorKeys(!1);break;case"Got it!":this.enableCursorKeys(!0),this.resumeGame();break;case"Quit to Main Menu":this.resumeGame(),this.state.start("menu");break;case"Mute Music":M.default.storeData("mutetheme",!0),M.default.muteOrPlay(this.theme,!0);break;case"Mute Sound":M.default.storeData("mutesound",!0),M.default.muteOrPlay(this.sfx,!0);break;case"Play Music":M.default.storeData("mutetheme",!1),M.default.muteOrPlay(this.theme,!1);break;case"Play Sound":M.default.storeData("mutesound",!1),M.default.muteOrPlay(this.sfx,!1)}}},{key:"enableCursorKeys",value:function(a){this.naviKeys.up.enabled=a,this.naviKeys.down.enabled=a}},{key:"platformHitListener",value:function(a,b,c,d){!b.sprite||"slippery1"!=b.sprite.frameName&&"slippery2"!=b.sprite.frameName?this.player.onslippyplatform&&(this.player.onslippyplatform=!1):(M.default.playSound(this.sfx,["slime7","slime8","slime9"]),this.player.onslippyplatform=!0)}},{key:"collectablesListener",value:function(a,b,c,d){if(b.sprite&&"player"===b.sprite.key){switch(a.sprite.frameName){case"cheese1":this.player.replenishEnergy(10),this.cheeseScore.increaseScore(2),this.sfx.play("Rise04");break;case"cheese2":case"cheese3":this.player.replenishEnergy(5),this.cheeseScore.increaseScore(1),this.sfx.play("Rise04");break;case"wineglass":case"martiniglass":this.player.replenishLife(10),this.sfx.play("Rise04");break;case"winebottle":this.player.replenishLife(20),this.sfx.play("Rise04");break;case"shurikens":this.player.throwEnabled||this.player.throwBody(),this.player.increaseShuriken(5),this.sfx.play("Rise04");break;case"cheesepule":this.player.replenishEnergy(100),this.player.replenishLife(100),this.cheeseScore.increaseScore(100),this.sfx.play("collectsword"),this.scenesmarker[2]=!0}this.player.flash("green"),a.sprite.destroy()}}},{key:"enemyHitListener",value:function(a,b,c,d){if(b.sprite&&"player"===b.sprite.key&&a.sprite)switch(a.sprite.key){case"ratgrunt":c===a.data.shapes[0]&&this.player.damagePlayer(5);break;case"ratsoldier":case"ratninja":/^s\d{1}/.test(a.sprite.frameName)?(this.player.damagePlayer(5,200),a.sprite.kill()):c===a.data.shapes[0]&&this.player.damagePlayer(8);break;case"ratboss":this.player.damagePlayer(12);break;case"cat":this.player.damagePlayer(8);break;case"objects3":this.player.damagePlayer(4);break;case"objects2":var e=a.sprite.frameName;(/^upper\d{1}/.test(e)||/^below\d{1}/.test(e))&&this.player.damagePlayer(4);break;case"objects1":"stop"==a.sprite.frameName&&this.player.damagePlayer(5,200)}}},{key:"playerHitListener",value:function(a,b,c,d){if(b.sprite)if(a.sprite&&/^s\d{1}/.test(a.sprite.frameName)){switch(b.sprite.key){case"ratgrunt":case"ratsoldier":case"ratninja":case"ratboss":b.sprite.damageRat(6,400);break;case"cat":b.sprite.damageCat(6,400)}a.sprite.kill()}else switch(b.sprite.key){case"ratgrunt":case"ratsoldier":case"ratninja":case"ratboss":b.sprite.damageRat(8,400);break;case"cat":b.sprite.damageCat(8,400)}}},{key:"playerArmed",value:function(a,b){a&&a.sprite&&"player"==a.sprite.key&&this.player.damagePlayer(10)}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}}]),b}(Phaser.State);c.default=T,b.exports=c.default},{"../components/Tools.js":2,"../prefabs/BlockingObjects.js":3,"../prefabs/CatFinale.js":5,"../prefabs/CheeseScore.js":6,"../prefabs/Collectables.js":7,"../prefabs/EnemyStops.js":8,"../prefabs/EnergyBar.js":9,"../prefabs/EntranceDoor.js":10,"../prefabs/HealthBar.js":11,"../prefabs/Platforms.js":12,"../prefabs/Player.js":13,"../prefabs/Popup.js":14,"../prefabs/RatBoss.js":15,"../prefabs/RatNinja.js":17,"../prefabs/RatSoldier.js":18,"../prefabs/ShurikenHUD.js":19,"../prefabs/Stalacites.js":20,"../prefabs/TitleText.js":21,"../prefabs/WavesObjects.js":22}],30:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("../components/Tools.js"),j=d(i),k=function(a){function b(){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this)}return f(b,a),g(b,[{key:"init",value:function(a){this.episode=a}}]),g(b,[{key:"create",value:function(){this.state.start(this.episode),/^ep\d{1}/.test(this.episode)&&j.default.storeEp(this.episode)}},{key:"update",value:function(){}}]),b}(Phaser.State);c.default=k,b.exports=c.default},{"../components/Tools.js":2}],31:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("../components/Tools.js"),j=d(i),k=function(a){function b(){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.highlightStyle={font:"bold 28px Century",fill:"#cde16d"}}return f(b,a),g(b,[{key:"create",value:function(){var a=this,b=this.add.image(0,0,"narrative"),c=this.add.text(50,700,"Press 'A' to continue...",this.highlightStyle),d=0;this.sound.stopAll(),this.theme=this.add.audioSprite("intro"),j.default.getData("mutetheme")&&j.default.muteOrPlay(this.theme,!0),this.add.tween(c).to({alpha:.2},600,Phaser.Easing.Quadratic.InOut,!0,0,1/0,!0);var e=new Array;e[0]=this.add.tween(b).to({x:"-506"},600,Phaser.Easing.Quadratic.InOut),e[1]=this.add.tween(b).to({x:"-1024"},600,Phaser.Easing.Quadratic.InOut),e[2]=this.add.tween(b).to({x:"-506"},600,Phaser.Easing.Quadratic.InOut),e[3]=this.add.tween(b).to({x:"-1024"},600,Phaser.Easing.Quadratic.InOut),e[4]=this.add.tween(b).to({x:"-506"},600,Phaser.Easing.Quadratic.InOut),e[5]=this.add.tween(b).to({x:"-1024"},600,Phaser.Easing.Quadratic.InOut),this.keyA=this.input.keyboard.addKey(Phaser.Keyboard.A),this.keyA.onDown.add(function(){e[d++].start(),6==d&&a.state.start("preload",!0,!1,"ep1")},this),this.game.onPause.add(function(){this.sound.unsetMute()},this),this.theme.sounds["Finding Movement"].play("Finding Movement",null,.4,!0)}},{key:"update",value:function(){}},{key:"movenarrative",value:function(){}}]),b}(Phaser.State);c.default=k,b.exports=c.default},{"../components/Tools.js":2}],32:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("../components/Tools.js"),j=d(i),k=function(a){function b(){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).apply(this,arguments)}return f(b,a),g(b,[{key:"create",value:function(){var a=this;this.add.image(0,0,"gameover"),this.restart=this.add.image(0,0,"restartepisode"),this.return=this.add.image(0,0,"return"),this.add.image(0,0,"go_wordings"),this.selectionArray=new Array(this.restart,this.return),this.select("restartepisode");var b=this.game.add.audioSprite("sfx");this.naviKeys=this.input.keyboard.addKeys({up:Phaser.KeyCode.UP,down:Phaser.KeyCode.DOWN,enter:Phaser.KeyCode.ENTER}),this.naviKeys.enter.onDown.add(this.processSelection,this),this.naviKeys.up.onDown.add(function(c){a.selectionArray.unshift(a.selectionArray.pop()),a.select(a.selectionArray[0].key),b.play("menuselect")},this),this.naviKeys.down.onDown.add(function(c){a.selectionArray.push(a.selectionArray.shift()),a.select(a.selectionArray[0].key),b.play("menuselect")},this),this.sound.stopAll(),this.theme=this.add.audioSprite("gameover"),j.default.getData("mutetheme")&&j.default.muteOrPlay(this.theme,!0),this.theme.play("Death of Kings",.6)}},{key:"update",value:function(){}},{key:"select",value:function(a){switch(this.restart.alpha=0,this.return.alpha=0,a){case"restartepisode":this.restart.alpha=1;break;case"return":this.return.alpha=1}}},{key:"processSelection",value:function(){switch(this.selectionArray[0].key){case"restartepisode":this.state.start("game",!0,!1,j.default.getEp());break;case"return":this.state.start("menu")}}}]),b}(Phaser.State);c.default=k,b.exports=c.default},{"../components/Tools.js":2}],33:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("../prefabs/Popup.js"),h=d(g),i=a("../components/Tools.js"),j=d(i),k=function(){function a(){e(this,a)}return f(a,[{key:"create",value:function(){var a=this;this.add.image(0,0,"splashscreen"),this.animeffect=this.add.image(0,0,"animeffect"),this.start=this.add.image(0,0,"start"),this.continue=this.add.image(0,0,"continue"),this.options=this.add.image(0,0,"options"),this.add.image(0,0,"wordings"),this.selectionArray=new Array(this.start,this.continue,this.options),this.select("start"),this.add.tween(this.animeffect).to({alpha:.2},800,Phaser.Easing.Quadratic.InOut,!0,0,1/0,!0);var b=this.game.add.audioSprite("sfx");this.nextLvlpopup=!1,this.naviKeys=this.input.keyboard.addKeys({up:Phaser.KeyCode.UP,down:Phaser.KeyCode.DOWN,enter:Phaser.KeyCode.ENTER,esc:Phaser.KeyCode.ESC}),this.naviKeys.enter.onDown.add(this.processSelection,this),this.naviKeys.up.onDown.add(function(c){a.game.paused?a.popup.cursorMoved(c.keyCode):(a.selectionArray.unshift(a.selectionArray.pop()),a.select(a.selectionArray[0].key),b.play("menuselect"))},this),this.naviKeys.down.onDown.add(function(c){a.game.paused?a.popup.cursorMoved(c.keyCode):(a.selectionArray.push(a.selectionArray.shift()),a.select(a.selectionArray[0].key),b.play("menuselect"))},this),this.naviKeys.esc.onDown.add(function(){a.game.paused&&a.resumeState()},this),this.game.onPause.add(function(){this.sound.unsetMute()},this)}},{key:"select",value:function(a){switch(this.start.alpha=0,this.continue.alpha=0,this.options.alpha=0,a){case"start":this.start.alpha=1;break;case"continue":this.continue.alpha=1;break;case"options":this.options.alpha=1}}},{key:"processSelection",value:function(){switch(this.selectionArray[0].key){case"start":j.default.getData("attackEnabled")&&j.default.storeData("attackEnabled",!1),j.default.getData("throwEnabled")&&j.default.storeData("throwEnabled",!1),this.state.start("preload",!0,!1,"gamenarrative");break;case"continue":this.game.paused?this.popupHandler():(this.game.paused=!0,this.popup=new h.default(this.game,0,0,4),this.world.addChild(this.popup));break;case"options":this.game.paused?this.popupHandler():(this.game.paused=!0,this.popup=new h.default(this.game,0,0,1),this.world.addChild(this.popup))}}},{key:"popupHandler",value:function(){var a=this.world.getTop().optionEntered();if(a)switch(a){case"Instructions":this.popupInstruction=new h.default(this.game,0,0,3);var b=this.cache.getJSON("config").popup.instructions;this.popupInstruction.setTitle(b.title),this.popupInstruction.setDescription(b.description,0),this.world.removeChild(this.popup),this.world.addChild(this.popupInstruction),this.enableCursorKeys(!1);break;case"Got it!":this.enableCursorKeys(!0),this.resumeState();break;case"Credits":this.popupCredits=new h.default(this.game,0,0,3);var c=this.cache.getJSON("config").popup.credits;this.popupCredits.setTitle(c.title),this.popupCredits.setDescription(c.description,0),this.world.removeChild(this.popup),this.world.addChild(this.popupCredits),this.enableCursorKeys(!1);break;case"Back":this.resumeState();break;case"Mute Music":j.default.storeData("mutetheme",!0);break;case"Mute Sound":j.default.storeData("mutesound",!0);break;case"Play Music":j.default.storeData("mutetheme",!1);break;case"Play Sound":j.default.storeData("mutesound",!1);break;case"ep1. The Apprenticeship":this.resumeState(),this.state.start("preload",!0,!1,"ep1");break;case"ep2. The Rat Infestation":this.resumeState(),this.state.start("preload",!0,!1,"ep2");break;case"ep3. The Flying Menace":this.resumeState(),this.state.start("preload",!0,!1,"ep3");break;case"ep4. The Shooting Stars":this.resumeState(),this.state.start("preload",!0,!1,"ep4");break;case"ep5. The Ninja Reality":this.resumeState(),this.state.start("preload",!0,!1,"ep5");break;case"ep6. The O'Mighty Claw":this.resumeState(),this.state.start("preload",!0,!1,"ep6")}}},{key:"enableCursorKeys",value:function(a){this.naviKeys.up.enabled=a,this.naviKeys.down.enabled=a}},{key:"resumeState",value:function(){var a=this.world.getTop();"popup"===a.key&&(this.world.removeChild(a),a.destroy()),this.game.paused=!1}},{key:"update",value:function(){}}]),a}();c.default=k,b.exports=c.default},{"../components/Tools.js":2,"../prefabs/Popup.js":14}],34:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"init",value:function(a){this.whichEp=a}}]),e(a,[{key:"preload",value:function(){this.add.text(this.game.width/2,.45*this.game.height,"loading...",{font:"40px Arial",fill:"#ffffff"}).anchor.setTo(.5,.5);var a=this.add.sprite(this.game.width/2,.55*this.game.height,"preloader");a.anchor.setTo(.5,.5),this.load.setPreloadSprite(a),this.load.pack(this.whichEp,"assets/config/AssetPack.json")}},{key:"create",value:function(){this.state.start("game",!0,!1,this.whichEp)}},{key:"update",value:function(){}}]),a}();c.default=f,b.exports=c.default},{}],35:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("../components/Tools.js"),j=d(i),k=function(a){function b(){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.highlightStyle={font:"bold 28px Century",fill:"#cde16d"}}return f(b,a),g(b,[{key:"create",value:function(){var a=this;this.wonimg=this.add.image(0,160,"won"),this.starttimer=this.game.time.now+2500,this.movetimer=0;var b=this.add.text(50,700,"Press 'A' to return to main menu...",this.highlightStyle);this.add.tween(b).to({alpha:.2},600,Phaser.Easing.Quadratic.InOut,!0,0,1/0,!0);var c=this.add.graphics(0,0);c.beginFill(2237034),c.drawRect(0,0,this.game.width,160),c.endFill();var d=j.default.getTotalScore(),e=j.default.getData("high_score");this.add.text(this.game.width/2,50,"You've collected "+d+" out of 172 cheese! Well Done!",this.highlightStyle).anchor.setTo(.5,.5),this.add.text(this.game.width/2,100,"Your highest score is "+e,this.highlightStyle).anchor.setTo(.5,.5),this.keyA=this.input.keyboard.addKey(Phaser.Keyboard.A),this.keyA.onDown.add(function(){a.state.start("menu")},this),this.sound.stopAll(),this.theme=this.add.audioSprite("gameover"),j.default.getData("mutetheme")&&j.default.muteOrPlay(this.theme,!0),this.theme.play("Death of Kings",.6)}},{key:"update",value:function(){this.game.time.now>this.starttimer&&this.wonimg.position.y>-1280&&(this.wonimg.position.y-=.3)}}]),b}(Phaser.State);c.default=k,b.exports=c.default},{"../components/Tools.js":2}]},{},[1]);